function g(a){throw a;}var i=void 0,k=!0,m=null,n=!1;function aa(){return function(a){return a}}function ba(){return function(){}}function p(a){return function(){return this[a]}}function ca(a){return function(){return a}}var r,s=this;function da(a,b){var c=a.split("."),d=s;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ea(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function fa(){}function ga(a){a.ub=function(){return a.Id?a.Id:a.Id=new a}}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return a!==i}function ia(a){return"array"==ha(a)}function ja(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function t(a){return"string"==typeof a}function u(a){return"function"==ha(a)}function ka(a){var b=typeof a;return"object"==b&&a!=m||"function"==b}function la(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),na=0;
function oa(a,b,c){return a.call.apply(a.bind,arguments)}function pa(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(m,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var sa=Date.now||function(){return+new Date};function v(a,b){function c(){}c.prototype=b.prototype;a.L=b.prototype;a.prototype=new c;a.prototype.constructor=a};function ta(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ua(a){if(!va.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(wa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(xa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ya,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(za,"&quot;"));return a}var wa=/&/g,xa=/</g,ya=/>/g,za=/\"/g,va=/[&<>\"]/;function Aa(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var z=Array.prototype,Ba=z.indexOf?function(a,b,c){return z.indexOf.call(a,b,c)}:function(a,b,c){c=c==m?0:0>c?Math.max(0,a.length+c):c;if(t(a))return!t(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},B=z.forEach?function(a,b,c){z.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=t(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ca=z.filter?function(a,b,c){return z.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=t(a)?a.split(""):
a,j=0;j<d;j++)if(j in h){var l=h[j];b.call(c,l,j,a)&&(e[f++]=l)}return e},Da=z.map?function(a,b,c){return z.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=t(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ea=z.every?function(a,b,c){return z.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=t(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return n;return k};
function Fa(a,b){var c;a:{c=a.length;for(var d=t(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(i,d[e],e,a)){c=e;break a}c=-1}return 0>c?m:t(a)?a.charAt(c):a[c]}function Ga(a,b){return 0<=Ba(a,b)}function C(a,b){var c=Ba(a,b);0<=c&&z.splice.call(a,c,1)}function Ha(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ia(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(ia(d)||(e=ja(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(e)for(var f=a.length,h=d.length,j=0;j<h;j++)a[f+j]=d[j];else a.push(d)}}function Ja(a,b,c){return 2>=arguments.length?z.slice.call(a,b):z.slice.call(a,b,c)}function Ka(a,b){z.sort.call(a,b||La)}function La(a,b){return a>b?1:a<b?-1:0};var Ma,Na,Oa,Pa,Qa;function Ra(){return s.navigator?s.navigator.userAgent:m}function Sa(){return s.navigator}Pa=Oa=Na=Ma=n;var Ta;if(Ta=Ra()){var Ua=Sa();Ma=0==Ta.indexOf("Opera");Na=!Ma&&-1!=Ta.indexOf("MSIE");Oa=!Ma&&-1!=Ta.indexOf("WebKit");Pa=!Ma&&!Oa&&"Gecko"==Ua.product}var Va=Ma,D=Na,E=Pa,F=Oa,Wa=Sa();Qa=-1!=(Wa&&Wa.platform||"").indexOf("Mac");var Xa=!!Sa()&&-1!=(Sa().appVersion||"").indexOf("X11"),Ya;
a:{var Za="",$a;if(Va&&s.opera)var ab=s.opera.version,Za="function"==typeof ab?ab():ab;else if(E?$a=/rv\:([^\);]+)(\)|;)/:D?$a=/MSIE\s+([^\);]+)(\)|;)/:F&&($a=/WebKit\/(\S+)/),$a)var bb=$a.exec(Ra()),Za=bb?bb[1]:"";if(D){var cb,db=s.document;cb=db?db.documentMode:i;if(cb>parseFloat(Za)){Ya=String(cb);break a}}Ya=Za}var eb={};
function G(a){var b;if(!(b=eb[a])){b=0;for(var c=ta(String(Ya)).split("."),d=ta(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",j=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),q=RegExp("(\\d*)(\\D*)","g");do{var w=l.exec(h)||["","",""],y=q.exec(j)||["","",""];if(0==w[0].length&&0==y[0].length)break;b=((0==w[1].length?0:parseInt(w[1],10))<(0==y[1].length?0:parseInt(y[1],10))?-1:(0==w[1].length?0:parseInt(w[1],10))>(0==y[1].length?0:parseInt(y[1],10))?1:0)||((0==w[2].length)<
(0==y[2].length)?-1:(0==w[2].length)>(0==y[2].length)?1:0)||(w[2]<y[2]?-1:w[2]>y[2]?1:0)}while(0==b)}b=eb[a]=0<=b}return b}var fb={};function gb(a){return fb[a]||(fb[a]=D&&!!document.documentMode&&document.documentMode>=a)};var hb,ib=!D||gb(9);!E&&!D||D&&gb(9)||E&&G("1.9.1");D&&G("9");var jb=D||Va||F;function kb(a){a=a.className;return t(a)&&a.match(/\S+/g)||[]}function lb(a,b){var c=kb(a),d=Ja(arguments,1),e=c.length+d.length;mb(c,d);a.className=c.join(" ");return c.length==e}function nb(a,b){var c=kb(a),d=Ja(arguments,1),e=ob(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function mb(a,b){for(var c=0;c<b.length;c++)Ga(a,b[c])||a.push(b[c])}function ob(a,b){return Ca(a,function(a){return!Ga(b,a)})}
function pb(a,b,c){var d=kb(a);t(b)?C(d,b):ia(b)&&(d=ob(d,b));t(c)&&!Ga(d,c)?d.push(c):ia(c)&&mb(d,c);a.className=d.join(" ")};function I(a,b){this.x=ea(a)?a:0;this.y=ea(b)?b:0};function qb(a,b){this.width=a;this.height=b}qb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};qb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function rb(a,b){for(var c in a)b.call(i,a[c],c,a)}var sb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<sb.length;f++)c=sb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function ub(a){return a?new vb(J(a)):hb||(hb=new vb)}function wb(){var a,b,c,d;a=document;if(a.querySelectorAll&&a.querySelector)return a.querySelectorAll(".openseadragon-container");if(a.getElementsByClassName){var e=a.getElementsByClassName("openseadragon-container");return e}e=a.getElementsByTagName("*");d={};for(b=c=0;a=e[b];b++){var f=a.className;"function"==typeof f.split&&Ga(f.split(/\s+/),"openseadragon-container")&&(d[c++]=a)}d.length=c;return d}
function xb(a,b){rb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in yb?a.setAttribute(yb[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var yb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function zb(a,b,c){var d=arguments,e=document,f=d[0],h=d[1];if(!ib&&h&&(h.name||h.type)){f=["<",f];h.name&&f.push(' name="',ua(h.name),'"');if(h.type){f.push(' type="',ua(h.type),'"');var j={};tb(j,h);delete j.type;h=j}f.push(">");f=f.join("")}f=e.createElement(f);h&&(t(h)?f.className=h:ia(h)?lb.apply(m,[f].concat(h)):xb(f,h));2<d.length&&Ab(e,f,d,2);return f}
function Ab(a,b,c,d){function e(c){c&&b.appendChild(t(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];if(ja(f)&&!(ka(f)&&0<f.nodeType)){var h;a:{if(f&&"number"==typeof f.length){if(ka(f)){h="function"==typeof f.item||"string"==typeof f.item;break a}if(u(f)){h="function"==typeof f.item;break a}}h=n}B(h?Ha(f):f,e)}else e(f)}}function Bb(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Cb(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Db(a){return ka(a)&&1==a.nodeType}
function Eb(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function J(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Fb(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,"number"==typeof a&&0<=a&&32768>a):n}function vb(a){this.N=a||s.document||document}r=vb.prototype;r.wd=ub;
r.e=function(a){return t(a)?this.N.getElementById(a):a};r.ia=xb;r.createElement=function(a){return this.N.createElement(a)};r.createTextNode=function(a){return this.N.createTextNode(a)};function Gb(a){var b=a.N,a=!F?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new I(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}r.appendChild=function(a,b){a.appendChild(b)};r.append=function(a,b){Ab(J(a),a,arguments,1)};r.contains=Eb;var Hb;Hb=ca(k);/*
 Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

The "New" BSD License:

Copyright (c) 2005-2009, The Dojo Foundation
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
    may be used to endorse or promote products derived from this software
    without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function Ib(a,b){var c=b||[];a&&c.push(a);return c}var Jb=F&&"BackCompat"==document.compatMode,Kb=document.firstChild.children?"children":"childNodes",Lb=n;
function Mb(a){function b(){0<=q&&(x.id=c(q,A).replace(/\\/g,""),q=-1);if(0<=w){var a=w==A?m:c(w,A);0>">~+".indexOf(a)?x.j=a:x.Vb=a;w=-1}0<=l&&(x.da.push(c(l+1,A).replace(/\\/g,"")),l=-1)}function c(b,c){return ta(a.slice(b,c))}for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",d=[],e=-1,f=-1,h=-1,j=-1,l=-1,q=-1,w=-1,y="",H="",T,A=0,Pe=a.length,x=m,P=m;y=H,H=a.charAt(A),A<Pe;A++)if("\\"!=y)if(x||(T=A,x={ab:m,Ha:[],Fb:[],da:[],j:m,Vb:m,id:m,vc:function(){return Lb?this.qe:this.j}},w=A),0<=e)if("]"==
H){P.rc?P.Cc=c(h||e+1,A):P.rc=c(e+1,A);if((e=P.Cc)&&('"'==e.charAt(0)||"'"==e.charAt(0)))P.Cc=e.slice(1,-1);x.Fb.push(P);P=m;e=h=-1}else"="==H&&(h=0<="|~^$*".indexOf(y)?y:"",P.type=h+H,P.rc=c(e+1,A-h.length),h=A+1);else 0<=f?")"==H&&(0<=j&&(P.value=c(f+1,A)),j=f=-1):"#"==H?(b(),q=A+1):"."==H?(b(),l=A):":"==H?(b(),j=A):"["==H?(b(),e=A,P={}):"("==H?(0<=j&&(P={name:c(j+1,A),value:m},x.Ha.push(P)),f=A):" "==H&&y!=H&&(b(),0<=j&&x.Ha.push({name:c(j+1,A)}),x.Ld=x.Ha.length||x.Fb.length||x.da.length,x.Ie=
x.ab=c(T,A),x.qe=x.j=x.Vb?m:x.j||"*",x.j&&(x.j=x.j.toUpperCase()),d.length&&d[d.length-1].Vb&&(x.Hd=d.pop(),x.ab=x.Hd.ab+" "+x.ab),d.push(x),x=m);return d}function Nb(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}}function Ob(a){return 1==a.nodeType}function Pb(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(Lb?a.getAttribute(b):a.getAttribute(b,2))||""}
var Qb={"*=":function(a,b){return function(c){return 0<=Pb(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==Pb(c,a).indexOf(b)}},"$=":function(a,b){return function(c){c=" "+Pb(c,a);return c.lastIndexOf(b)==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+Pb(b,a)+" ").indexOf(c)}},"|=":function(a,b){b=" "+b;return function(c){c=" "+Pb(c,a);return c==b||0==c.indexOf(b+"-")}},"=":function(a,b){return function(c){return Pb(c,a)==b}}},Rb="undefined"==
typeof document.firstChild.nextElementSibling,Sb=!Rb?"nextElementSibling":"nextSibling",Tb=!Rb?"previousElementSibling":"previousSibling",Ub=Rb?Ob:Hb;function Vb(a){for(;a=a[Tb];)if(Ub(a))return n;return k}function Wb(a){for(;a=a[Sb];)if(Ub(a))return n;return k}function Xb(a){var b=a.parentNode,c=0,d=b[Kb],e=a._i||-1,f=b._l||-1;if(!d)return-1;d=d.length;if(f==d&&0<=e&&0<=f)return e;b._l=d;e=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[Sb])Ub(b)&&(b._i=++c,a===b&&(e=c));return e}
function Yb(a){return!(Xb(a)%2)}function Zb(a){return Xb(a)%2}
var ac={checked:function(){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return Vb},"last-child":function(){return Wb},"only-child":function(){return function(a){return!Vb(a)||!Wb(a)?n:k}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return n}return k}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},
not:function(a,b){var c=Mb(b)[0],d={H:1};"*"!=c.j&&(d.j=1);c.da.length||(d.da=1);var e=$b(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){if("odd"==b)return Zb;if("even"==b)return Yb;if(-1!=b.indexOf("n")){var c=b.split("n",2),d=c[0]?"-"==c[0]?-1:parseInt(c[0],10):1,e=c[1]?parseInt(c[1],10):0,f=0,h=-1;0<d?0>e?e=e%d&&d+e%d:0<e&&(e>=d&&(f=e-e%d),e%=d):0>d&&(d*=-1,0<e&&(h=e,e%=d));if(0<d)return function(a){a=Xb(a);return a>=f&&(0>h||a<=h)&&a%d==e};b=e}var j=parseInt(b,10);return function(a){return Xb(a)==
j}}},bc=D?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return Lb?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}};
function $b(a,b){if(!a)return Hb;var b=b||{},c=m;b.H||(c=Nb(c,Ob));b.j||"*"!=a.j&&(c=Nb(c,function(b){return b&&b.tagName==a.vc()}));b.da||B(a.da,function(a,b){var f=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=Nb(c,function(a){return f.test(a.className)});c.count=b});b.Ha||B(a.Ha,function(a){var b=a.name;ac[b]&&(c=Nb(c,ac[b](b,a.value)))});b.Fb||B(a.Fb,function(a){var b,f=a.rc;a.type&&Qb[a.type]?b=Qb[a.type](f,a.Cc):f.length&&(b=bc(f));b&&(c=Nb(c,b))});b.id||a.id&&(c=Nb(c,function(b){return!!b&&b.id==a.id}));
c||"default"in b||(c=Hb);return c}var cc={};
function dc(a){var b=cc[a.ab];if(b)return b;var c=a.Hd,c=c?c.Vb:"",d=$b(a,{H:1}),e="*"==a.j,f=document.getElementsByClassName;if(c)if(f={H:1},e&&(f.j=1),d=$b(a,f),"+"==c)var h=d,b=function(a,b,c){for(;a=a[Sb];)if(!Rb||Ob(a)){(!c||ec(a,c))&&h(a)&&b.push(a);break}return b};else if("~"==c)var j=d,b=function(a,b,c){for(a=a[Sb];a;){if(Ub(a)){if(c&&!ec(a,c))break;j(a)&&b.push(a)}a=a[Sb]}return b};else{if(">"==c)var l=d,l=l||Hb,b=function(a,b,c){for(var d=0,e=a[Kb];a=e[d++];)Ub(a)&&((!c||ec(a,c))&&l(a,d))&&
b.push(a);return b}}else if(a.id)d=!a.Ld&&e?Hb:$b(a,{H:1,id:1}),b=function(b,c){var e=ub(b).e(a.id),f;if(f=e&&d(e))if(!(f=9==b.nodeType)){for(f=e.parentNode;f&&f!=b;)f=f.parentNode;f=!!f}if(f)return Ib(e,c)};else if(f&&/\{\s*\[native code\]\s*\}/.test(String(f))&&a.da.length&&!Jb)var d=$b(a,{H:1,da:1,id:1}),q=a.da.join(" "),b=function(a,b){for(var c=Ib(0,b),e,f=0,h=a.getElementsByClassName(q);e=h[f++];)d(e,a)&&c.push(e);return c};else!e&&!a.Ld?b=function(b,c){for(var d=Ib(0,c),e,f=0,h=b.getElementsByTagName(a.vc());e=
h[f++];)d.push(e);return d}:(d=$b(a,{H:1,j:1,id:1}),b=function(b,c){for(var e=Ib(0,c),f,h=0,j=b.getElementsByTagName(a.vc());f=j[h++];)d(f,b)&&e.push(f);return e});return cc[a.ab]=b}var fc={},gc={};function hc(a){var b=Mb(ta(a));if(1==b.length){var c=dc(b[0]);return function(a){if(a=c(a,[]))a.Ub=k;return a}}return function(a){for(var a=Ib(a),c,f,h=b.length,j,l,q=0;q<h;q++){l=[];c=b[q];f=a.length-1;0<f&&(j={},l.Ub=k);f=dc(c);for(var w=0;c=a[w];w++)f(c,l,j);if(!l.length)break;a=l}return l}}
var ic=!!document.querySelectorAll&&(!F||G("526"));
function jc(a,b){if(ic){var c=gc[a];if(c&&!b)return c}if(c=fc[a])return c;var c=a.charAt(0),d=-1==a.indexOf(" ");0<=a.indexOf("#")&&d&&(b=k);if(ic&&!b&&-1==">~+".indexOf(c)&&(!D||-1==a.indexOf(":"))&&!(Jb&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf("|=")){var e=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return gc[a]=function(b){try{9==b.nodeType||d||g("");var c=b.querySelectorAll(e);D?c.be=k:c.Ub=k;return c}catch(f){return jc(a,k)(b)}}}var f=a.split(/\s*,\s*/);return fc[a]=
2>f.length?hc(a):function(a){for(var b=0,c=[],d;d=f[b++];)c=c.concat(hc(d)(a));return c}}var kc=0,lc=D?function(a){return Lb?a.getAttribute("_uid")||a.setAttribute("_uid",++kc)||kc:a.uniqueID}:function(a){return a._uid||(a._uid=++kc)};function ec(a,b){if(!b)return 1;var c=lc(a);return!b[c]?b[c]=1:0}
function mc(a){if(a&&a.Ub)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;kc++;if(D&&Lb){var c=kc+"";a[0].setAttribute("_zipIdx",c);for(var d=1,e;e=a[d];d++)a[d].getAttribute("_zipIdx")!=c&&b.push(e),e.setAttribute("_zipIdx",c)}else if(D&&a.be)try{for(d=1;e=a[d];d++)Ob(e)&&b.push(e)}catch(f){}else{a[0]&&(a[0]._zipIdx=kc);for(d=1;e=a[d];d++)a[d]._zipIdx!=kc&&b.push(e),e._zipIdx=kc}return b}
function K(a,b){if(!a)return[];if(a.constructor==Array)return a;if(!t(a))return[a];if(t(b)&&(b=t(b)?document.getElementById(b):b,!b))return[];var b=b||document,c=b.ownerDocument||b.documentElement;Lb=b.contentType&&"application/xml"==b.contentType||Va&&(b.doctype||"[object XMLDocument]"==c.toString())||!!c&&(D?c.xml:b.xmlVersion||c.xmlVersion);return(c=jc(a)(b))&&c.Ub?c:mc(c)}K.Ha=ac;da("goog.dom.query",K);da("goog.dom.query.pseudos",K.Ha);var nc=!D||gb(9),oc=!D||gb(9),pc=D&&!G("9");!F||G("528");E&&G("1.9b")||D&&G("8")||Va&&G("9.5")||F&&G("528");E&&!G("8")||D&&G("9");function qc(){0!=rc&&(this.Ce=Error().stack,la(this))}var rc=0;qc.prototype.rd=n;function sc(a,b){this.type=a;this.currentTarget=this.target=b}r=sc.prototype;r.Ga=n;r.defaultPrevented=n;r.Yb=k;r.stopPropagation=function(){this.Ga=k};r.preventDefault=function(){this.defaultPrevented=k;this.Yb=n};function tc(a){a.preventDefault()};function uc(a){uc[" "](a);return a}uc[" "]=fa;function vc(a,b){a&&this.init(a,b)}v(vc,sc);var wc=[1,4,2];r=vc.prototype;r.target=m;r.relatedTarget=m;r.offsetX=0;r.offsetY=0;r.clientX=0;r.clientY=0;r.screenX=0;r.screenY=0;r.button=0;r.keyCode=0;r.charCode=0;r.ctrlKey=n;r.altKey=n;r.shiftKey=n;r.metaKey=n;r.Gc=n;r.t=m;
r.init=function(a,b){var c=this.type=a.type;sc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(E){var e;a:{try{uc(d.nodeName);e=k;break a}catch(f){}e=n}e||(d=m)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=F||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=F||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Gc=Qa?a.metaKey:a.ctrlKey;this.state=a.state;this.t=a;a.defaultPrevented&&this.preventDefault();delete this.Ga};function xc(a){return(nc?0==a.t.button:"click"==a.type?k:!!(a.t.button&wc[0]))&&!(F&&Qa&&a.ctrlKey)}
r.stopPropagation=function(){vc.L.stopPropagation.call(this);this.t.stopPropagation?this.t.stopPropagation():this.t.cancelBubble=k};r.preventDefault=function(){vc.L.preventDefault.call(this);var a=this.t;if(a.preventDefault)a.preventDefault();else if(a.returnValue=n,pc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};r.ce=p("t");function yc(){}var zc=0;r=yc.prototype;r.key=0;r.Ia=n;r.md=n;r.init=function(a,b,c,d,e,f){u(a)?this.Kd=k:a&&a.handleEvent&&u(a.handleEvent)?this.Kd=n:g(Error("Invalid listener argument"));this.$a=a;this.Od=b;this.src=c;this.type=d;this.capture=!!e;this.Ea=f;this.md=n;this.key=++zc;this.Ia=n};r.handleEvent=function(a){return this.Kd?this.$a.call(this.Ea||this.src,a):this.$a.handleEvent.call(this.$a,a)};var Ac={},L={},Bc={},Cc={};
function M(a,b,c,d,e){if(b){if(ia(b)){for(var f=0;f<b.length;f++)M(a,b[f],c,d,e);return m}var d=!!d,h=L;b in h||(h[b]={r:0,P:0});h=h[b];d in h||(h[d]={r:0,P:0},h.r++);var h=h[d],j=la(a),l;h.P++;if(h[j]){l=h[j];for(f=0;f<l.length;f++)if(h=l[f],h.$a==c&&h.Ea==e){if(h.Ia)break;return l[f].key}}else l=h[j]=[],h.r++;var q=Dc,w=oc?function(a){return q.call(w.src,w.key,a)}:function(a){a=q.call(w.src,w.key,a);if(!a)return a},f=w;f.src=a;h=new yc;h.init(c,f,a,b,d,e);c=h.key;f.key=c;l.push(h);Ac[c]=h;Bc[j]||
(Bc[j]=[]);Bc[j].push(h);a.addEventListener?(a==s||!a.od)&&a.addEventListener(b,f,d):a.attachEvent(b in Cc?Cc[b]:Cc[b]="on"+b,f);return c}g(Error("Invalid event type"))}function Ec(a,b,c,d,e){if(ia(b))for(var f=0;f<b.length;f++)Ec(a,b[f],c,d,e);else if(d=!!d,a=Fc(a,b,d))for(f=0;f<a.length;f++)if(a[f].$a==c&&a[f].capture==d&&a[f].Ea==e){N(a[f].key);break}}
function N(a){if(!Ac[a])return n;var b=Ac[a];if(b.Ia)return n;var c=b.src,d=b.type,e=b.Od,f=b.capture;c.removeEventListener?(c==s||!c.od)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Cc?Cc[d]:Cc[d]="on"+d,e);c=la(c);Bc[c]&&(e=Bc[c],C(e,b),0==e.length&&delete Bc[c]);b.Ia=k;if(b=L[d][f][c])b.Nd=k,Gc(d,f,c,b);delete Ac[a];return k}
function Gc(a,b,c,d){if(!d.Pb&&d.Nd){for(var e=0,f=0;e<d.length;e++)d[e].Ia?d[e].Od.src=m:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Nd=n;0==f&&(delete L[a][b][c],L[a][b].r--,0==L[a][b].r&&(delete L[a][b],L[a].r--),0==L[a].r&&delete L[a])}}function Fc(a,b,c){var d=L;return b in d&&(d=d[b],c in d&&(d=d[c],a=la(a),d[a]))?d[a]:m}
function Hc(a,b,c,d,e){var f=1,b=la(b);if(a[b]){a.P--;a=a[b];a.Pb?a.Pb++:a.Pb=1;try{for(var h=a.length,j=0;j<h;j++){var l=a[j];l&&!l.Ia&&(f&=Ic(l,e)!==n)}}finally{a.Pb--,Gc(c,d,b,a)}}return Boolean(f)}function Ic(a,b){a.md&&N(a.key);return a.handleEvent(b)}
function Dc(a,b){if(!Ac[a])return k;var c=Ac[a],d=c.type,e=L;if(!(d in e))return k;var e=e[d],f,h;if(!oc){var j;if(!(j=b))a:{j=["window","event"];for(var l=s;f=j.shift();)if(l[f]!=m)l=l[f];else{j=m;break a}j=l}f=j;j=k in e;l=n in e;if(j){if(0>f.keyCode||f.returnValue!=i)return k;a:{var q=n;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(w){q=k}if(q||f.returnValue==i)f.returnValue=k}}q=new vc;q.init(f,this);f=k;try{if(j){for(var y=[],H=q.currentTarget;H;H=H.parentNode)y.push(H);h=e[k];h.P=h.r;for(var T=
y.length-1;!q.Ga&&0<=T&&h.P;T--)q.currentTarget=y[T],f&=Hc(h,y[T],d,k,q);if(l){h=e[n];h.P=h.r;for(T=0;!q.Ga&&T<y.length&&h.P;T++)q.currentTarget=y[T],f&=Hc(h,y[T],d,n,q)}}else f=Ic(c,q)}finally{y&&(y.length=0)}return f}d=new vc(b,this);return f=Ic(c,d)};function Jc(a){qc.call(this);this.Ed=a;this.l=[]}v(Jc,qc);var Kc=[];function O(a,b,c,d,e){ia(c)||(Kc[0]=c,c=Kc);for(var f=0;f<c.length;f++){var h=M(b,c[f],d||a,e||n,a.Ed||a);a.l.push(h)}return a}function Lc(a,b,c,d,e,f){if(ia(c))for(var h=0;h<c.length;h++)Lc(a,b,c[h],d,e,f);else{a:{d=d||a;f=f||a.Ed||a;e=!!e;if(b=Fc(b,c,e))for(c=0;c<b.length;c++)if(!b[c].Ia&&b[c].$a==d&&b[c].capture==e&&b[c].Ea==f){b=b[c];break a}b=m}b&&(b=b.key,N(b),C(a.l,b))}return a}
Jc.prototype.Xb=function(){B(this.l,N);this.l.length=0};Jc.prototype.handleEvent=function(){g(Error("EventHandler.handleEvent not implemented"))};function Mc(){qc.call(this)}v(Mc,qc);r=Mc.prototype;r.od=k;r.Fc=m;r.Kc=function(a){this.Fc=a};r.addEventListener=function(a,b,c,d){M(this,a,b,c,d)};r.removeEventListener=function(a,b,c,d){Ec(this,a,b,c,d)};
r.dispatchEvent=function(a){var b=a.type||a,c=L;if(b in c){if(t(a))a=new sc(a,this);else if(a instanceof sc)a.target=a.target||this;else{var d=a,a=new sc(b,this);tb(a,d)}var d=1,e,c=c[b],b=k in c,f;if(b){e=[];for(f=this;f;f=f.Fc)e.push(f);f=c[k];f.P=f.r;for(var h=e.length-1;!a.Ga&&0<=h&&f.P;h--)a.currentTarget=e[h],d&=Hc(f,e[h],a.type,k,a)&&a.Yb!=n}if(n in c)if(f=c[n],f.P=f.r,b)for(h=0;!a.Ga&&h<e.length&&f.P;h++)a.currentTarget=e[h],d&=Hc(f,e[h],a.type,n,a)&&a.Yb!=n;else for(e=this;!a.Ga&&e&&f.P;e=
e.Fc)a.currentTarget=e,d&=Hc(f,e,a.type,n,a)&&a.Yb!=n;a=Boolean(d)}else a=k;return a};function Nc(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Nc.prototype.contains=function(a){return!this||!a?n:a instanceof Nc?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Oc(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Oc.prototype.contains=function(a){return a instanceof Oc?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function Q(a,b,c){t(b)?Pc(a,c,b):rb(b,ra(Pc,a))}function Pc(a,b,c){a.style[Aa(c)]=b}function R(a,b){var c=J(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,m))?c[b]||c.getPropertyValue(b)||"":""}function Qc(a,b){return a.currentStyle?a.currentStyle[b]:m}function Rc(a,b){return R(a,b)||Qc(a,b)||a.style&&a.style[b]}function Sc(a,b,c){var d,e=E&&(Qa||Xa)&&G("1.9");b instanceof I?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Tc(d,e);a.style.top=Tc(b,e)}
function Uc(a){var b=a.getBoundingClientRect();D&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Vc(a){if(D&&!gb(8))return a.offsetParent;for(var b=J(a),c=Rc(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Rc(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return m}
function Wc(a){var b,c=J(a),d=Rc(a,"position"),e=E&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new I(0,0),h;b=c?J(c):document;if(h=D)if(h=!gb(9))ub(b),h=n;h=h?b.body:b.documentElement;if(a==h)return f;if(a.getBoundingClientRect)b=Uc(a),a=Gb(ub(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{e=a;do{f.x+=e.offsetLeft;
f.y+=e.offsetTop;e!=a&&(f.x+=e.clientLeft||0,f.y+=e.clientTop||0);if(F&&"fixed"==Rc(e,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}e=e.offsetParent}while(e&&e!=a);if(Va||F&&"absolute"==d)f.y-=c.body.offsetTop;for(e=a;(e=Vc(e))&&e!=c.body&&e!=h;)if(f.x-=e.scrollLeft,!Va||"TR"!=e.tagName)f.y-=e.scrollTop}return f}function Xc(a,b){var c=Yc(a),d=Yc(b);return new I(c.x-d.x,c.y-d.y)}
function Yc(a){var b=new I;if(1==a.nodeType){if(a.getBoundingClientRect){var c=Uc(a);b.x=c.left;b.y=c.top}else{var c=Gb(ub(a)),d=Wc(a);b.x=d.x-c.x;b.y=d.y-c.y}if(E&&!G(12)){var e;D?e="-ms-transform":F?e="-webkit-transform":Va?e="-o-transform":E&&(e="-moz-transform");var f;e&&(f=Rc(a,e));f||(f=Rc(a,"transform"));f?(a=f.match(Zc),a=!a?new I(0,0):new I(parseFloat(a[1]),parseFloat(a[2]))):a=new I(0,0);b=new I(b.x+a.x,b.y+a.y)}}else e=u(a.ce),f=a,a.targetTouches?f=a.targetTouches[0]:e&&a.t.targetTouches&&
(f=a.t.targetTouches[0]),b.x=f.clientX,b.y=f.clientY;return b}function $c(a,b,c){b instanceof qb?(c=b.height,b=b.width):c==i&&g(Error("missing height argument"));a.style.width=Tc(b,k);a.style.height=Tc(c,k)}function Tc(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function ad(a){if("none"!=Rc(a,"display"))return bd(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=bd(a);b.display=c;b.position=e;b.visibility=d;return a}function bd(a){var b=a.offsetWidth,c=a.offsetHeight,d=F&&!b&&!c;return(!ea(b)||d)&&a.getBoundingClientRect?(a=Uc(a),new qb(a.right-a.left,a.bottom-a.top)):new qb(b,c)}function cd(a){var b=Wc(a),a=ad(a);return new Oc(b.x,b.y,a.width,a.height)}
function S(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function U(a,b){a.style.display=b?"":"none"}function dd(a){return"rtl"==Rc(a,"direction")}var ed=E?"MozUserSelect":F?"WebkitUserSelect":m;
function fd(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function gd(a,b){if(D){var c=fd(a,Qc(a,b+"Left")),d=fd(a,Qc(a,b+"Right")),e=fd(a,Qc(a,b+"Top")),f=fd(a,Qc(a,b+"Bottom"));return new Nc(e,d,f,c)}c=R(a,b+"Left");d=R(a,b+"Right");e=R(a,b+"Top");f=R(a,b+"Bottom");return new Nc(parseFloat(e),parseFloat(d),parseFloat(f),parseFloat(c))}var hd={thin:2,medium:4,thick:6};function id(a,b){if("none"==Qc(a,b+"Style"))return 0;var c=Qc(a,b+"Width");return c in hd?hd[c]:fd(a,c)}
function jd(a){if(D){var b=id(a,"borderLeft"),c=id(a,"borderRight"),d=id(a,"borderTop"),a=id(a,"borderBottom");return new Nc(d,c,a,b)}b=R(a,"borderLeftWidth");c=R(a,"borderRightWidth");d=R(a,"borderTopWidth");a=R(a,"borderBottomWidth");return new Nc(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Zc=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function kd(a,b,c){qc.call(this);this.target=a;this.handle=b||a;this.Ac=c||new Oc(NaN,NaN,NaN,NaN);this.N=J(a);this.ma=new Jc(this);M(this.handle,["touchstart","mousedown"],this.ue,n,this)}v(kd,Mc);var ld=D||E&&G("1.9.3");r=kd.prototype;r.clientX=0;r.clientY=0;r.screenX=0;r.screenY=0;r.Sd=0;r.Td=0;r.Sa=0;r.Ta=0;r.sd=k;r.Da=n;r.Gd=0;r.me=0;r.je=n;r.Mc=n;r.Jb=p("ma");function md(a){ea(a.ua)||(a.ua=dd(a.target));return a.ua}
r.ue=function(a){var b="mousedown"==a.type;if(this.sd&&!this.Da&&(!b||xc(a))){nd(a);if(0==this.Gd)if(this.dispatchEvent(new od("start",this,a.clientX,a.clientY,a)))this.Da=k,a.preventDefault();else return;else a.preventDefault();var b=this.N,c=b.documentElement,d=!ld;O(this.ma,b,["touchmove","mousemove"],this.he,d);O(this.ma,b,["touchend","mouseup"],this.Hb,d);ld?(c.setCapture(n),O(this.ma,c,"losecapture",this.Hb)):O(this.ma,b?b.parentWindow||b.defaultView:window,"blur",this.Hb);D&&this.je&&O(this.ma,
b,"dragstart",tc);this.se&&O(this.ma,this.se,"scroll",this.pe,d);this.clientX=this.Sd=a.clientX;this.clientY=this.Td=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Mc?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==Rc(a,"position")&&(c=J(a).documentElement),c?(E?(d=jd(c),b+=d.left):gb(8)&&(d=jd(c),b-=d.left),a=dd(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.Sa=a;this.Ta=this.target.offsetTop;this.Ec=Gb(ub(this.N));this.me=sa()}else this.dispatchEvent("earlycancel")};
r.Hb=function(a,b){this.ma.Xb();ld&&this.N.releaseCapture();if(this.Da){nd(a);this.Da=n;var c=pd(this,this.Sa),d=qd(this,this.Ta);this.dispatchEvent(new od("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function nd(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.t.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.t.changedTouches[0],a.currentTarget)}
r.he=function(a){if(this.sd){nd(a);var b=(this.Mc&&md(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Da){var d=this.Sd-this.clientX,e=this.Td-this.clientY;if(d*d+e*e>this.Gd)if(this.dispatchEvent(new od("start",this,a.clientX,a.clientY,a)))this.Da=k;else{this.rd||this.Hb(a);return}}c=rd(this,b,c);b=c.x;c=c.y;this.Da&&this.dispatchEvent(new od("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(sd(this,a,b,c),a.preventDefault())}};function rd(a,b,c){var d=Gb(ub(a.N)),b=b+(d.x-a.Ec.x),c=c+(d.y-a.Ec.y);a.Ec=d;a.Sa+=b;a.Ta+=c;b=pd(a,a.Sa);a=qd(a,a.Ta);return new I(b,a)}r.pe=function(a){var b=rd(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;sd(this,a,b.x,b.y)};function sd(a,b,c,d){a.qd(c,d);a.dispatchEvent(new od("drag",a,b.clientX,b.clientY,b,c,d))}
function pd(a,b){var c=a.Ac,d=!isNaN(c.left)?c.left:m,c=!isNaN(c.width)?c.width:0;return Math.min(d!=m?d+c:Infinity,Math.max(d!=m?d:-Infinity,b))}function qd(a,b){var c=a.Ac,d=!isNaN(c.top)?c.top:m,c=!isNaN(c.height)?c.height:0;return Math.min(d!=m?d+c:Infinity,Math.max(d!=m?d:-Infinity,b))}r.qd=function(a,b){this.Mc&&md(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function od(a,b,c,d,e,f,h,j){sc.call(this,a);this.clientX=c;this.clientY=d;this.Ae=e;this.left=ea(f)?f:b.Sa;this.top=ea(h)?h:b.Ta;this.Ee=b;this.De=!!j}v(od,sc);function td(a){for(var b=0,c=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:c,left:b}}function ud(a){if(0<a.indexOf("://"))return a;var b=document.createElement("a");b.href=a;return b.protocol+"//"+b.host+b.pathname};function vd(){this.gb=[]}vd.prototype.addHandler=function(a,b){this.gb[a]||(this.gb[a]=[]);this.gb[a].push(b)};vd.prototype.$=function(a,b){var c=this.gb[a];c&&C(c,b)};vd.prototype.fireEvent=function(a,b,c){var d=n;(a=this.gb[a])&&B(a,function(a){a=a(b,c);ea(a)&&!a&&(d=k)});return d};function wd(a,b){this.Z={};this.l=[];var c=arguments.length;if(1<c){c%2&&g(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof wd)xd(a),e=a.l.concat(),d=V(a);else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++)this.set(e[c],d[c])}}r=wd.prototype;r.r=0;r.Nc=0;function V(a){xd(a);for(var b=[],c=0;c<a.l.length;c++)b.push(a.Z[a.l[c]]);return b}
r.clear=function(){this.Z={};this.Nc=this.r=this.l.length=0};r.remove=function(a){return yd(this.Z,a)?(delete this.Z[a],this.r--,this.Nc++,this.l.length>2*this.r&&xd(this),k):n};function xd(a){if(a.r!=a.l.length){for(var b=0,c=0;b<a.l.length;){var d=a.l[b];yd(a.Z,d)&&(a.l[c++]=d);b++}a.l.length=c}if(a.r!=a.l.length){for(var e={},c=b=0;b<a.l.length;)d=a.l[b],yd(e,d)||(a.l[c++]=d,e[d]=1),b++;a.l.length=c}}r.get=function(a,b){return yd(this.Z,a)?this.Z[a]:b};
r.set=function(a,b){yd(this.Z,a)||(this.r++,this.l.push(a),this.Nc++);this.Z[a]=b};function yd(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function zd(a,b){this.x=a;this.y=b};function Ad(a){this.points=a}function Bd(a){for(var b=0,c=a.length-1,d=0;d<a.length;d++)b+=(a[c].x+a[d].x)*(a[c].y-a[d].y),c=d;return b/2}
function Cd(a,b){for(var c,d=c=0,e,f=a.length-1,h=0;h<a.length;h++)e=a[h].x*a[f].y-a[f].x*a[h].y,c+=(a[h].x+a[f].x)*e,d+=(a[h].y+a[f].y)*e,f=h;e=6*Bd(a);c=new zd(Math.abs(c/e),Math.abs(d/e));d=[];for(e=0;e<a.length;e++){var f=a[e],j=(0>Bd(a)?-1:1)*b,h=f.x-c.x,l=f.y-c.y,q=0<j?1:0>j?-1:0,j=Math.sqrt(Math.pow(j,2)/(1+Math.pow(h/l,2)));d.push({x:f.x+Math.abs(h/l*j)*(0<h?1:0>h?-1:0)*q,y:f.y+Math.abs(j)*(0<l?1:0>l?-1:0)*q})}return d};function Dd(a,b,c,d){0<c?(this.x=a,this.width=c):(this.x=a+c,this.width=-c);0<d?(this.y=b,this.height=d):(this.y=b+d,this.height=-d)};function Ed(a,b,c,d){this.type=a;this.geometry=b;c&&(this.units=c);this.style=d?d:{}}function Fd(a,b,c){if("rect"==a.type)return b<a.geometry.x||c<a.geometry.y||b>a.geometry.x+a.geometry.width||c>a.geometry.y+a.geometry.height?n:k;if("polygon"==a.type){for(var a=a.geometry.points,d=n,e=a.length-1,f=0;f<a.length;f++)a[f].y>c!=a[e].y>c&&b<(a[e].x-a[f].x)*(c-a[f].y)/(a[e].y-a[f].y)+a[f].x&&(d=!d),e=f;return d}return n}
function Gd(a){return"rect"==a.type?a.geometry.width*a.geometry.height:"polygon"==a.type?Math.abs(Bd(a.geometry.points)):0}function Hd(a){if("rect"==a.type)return a;if("polygon"==a.type){for(var b=a.geometry.points,c=b[0].x,d=b[0].x,e=b[0].y,f=b[0].y,h=1;h<b.length;h++)b[h].x>d&&(d=b[h].x),b[h].x<c&&(c=b[h].x),b[h].y>f&&(f=b[h].y),b[h].y<e&&(e=b[h].y);return new Ed("rect",new Dd(c,e,d-c,f-e),n,a.style)}}
function Id(a,b){var c;c=a.geometry.points;var d=0>Bd(c)?-1:1;if(4>c.length)c=Cd(c,d*b);else{for(var e=c.length-1,f=1,h=[],j=0;j<c.length;j++)e=Cd([c[e],c[j],c[f]],d*b),h.push(e[1]),e=j,f++,f>c.length-1&&(f=0);c=h}return new Ed("polygon",new Ad(c),n,a.style)}function Jd(a,b){if("rect"==a.type){var c=b(a.geometry);return new Ed("rect",c,n,a.style)}if("polygon"==a.type){var d=[];B(a.geometry.points,function(a){d.push(b(a))});return new Ed("polygon",new Ad(d),n,a.style)}}
function W(a){return JSON.stringify(a.geometry)};function Kd(a,b,c,d){this.j=d||"";this.src=a;this.text=b;this.shapes=[c];this.context=document.URL};function Ld(){}function Md(a,b){a.f=new wd;a.hc=[];a.jb=[];a.ya=[];a.Ma=[];a.dc=[];a.Ab={Ya:n,Xa:n,Ka:[]};a.Na=new wd;a.Oa={Ka:[]};a.hd=b}function Nd(a,b){var c=a.Na.get(b);c||(c={Ya:n,Xa:n},a.Na.set(b,c));return c}
function Od(a,b,c,d){var e=a.Kb(b);if(!a.f.get(e)){var f=a.Dc(b),h=[],j=[];B(a.hc,function(a){f.addHandler(a.type,a.Ea)});B(a.jb,function(a){if(a.onInitAnnotator)a.onInitAnnotator(f)});B(a.Ma,function(a){a.src==e&&(f.K(a),h.push(a))});B(a.dc,function(a){a.src==e&&(f.F(a),j.push(a))});B(h,function(b){C(a.Ma,b)});B(j,function(b){C(a.dc,b)});var l=a.Na.get(e);l?(l.Ya&&f.O(),c&&(l.Ka=c),d&&(l.Ke=d),l.Xa&&f.ga(),a.Na.remove(e)):(a.Ab.Ya&&f.O(),a.Ab.Xa&&f.ga());c&&(a.Oa.tags=c);d&&(a.Oa.tagsColorMap=d);
console.log("_cachedProperties====================================");console.log(a.Oa);console.log(d);console.log("====================================");a.Oa&&f.ia(a.Oa);a.f.set(e,f);C(a.ya,b)}}
function Pd(a){var b,c;for(c=a.ya.length;0<c;c--){for(var d=b=a.ya[c-1],e=d.offsetTop,f=d.offsetLeft,h=d.offsetWidth,j=d.offsetHeight;d.offsetParent;)d=d.offsetParent,e+=d.offsetTop,f+=d.offsetLeft;e<window.pageYOffset+window.innerHeight&&(f<window.pageXOffset+window.innerWidth&&e+j>window.pageYOffset&&f+h>window.pageXOffset)&&Od(a,b)}}function Qd(a,b,c){if(b){var d=a.f.get(b);d?c?d.Ja():d.ga():Nd(a,b).Xa=c}else B(V(a.f),function(a){c?a.Ja():a.ga()}),a.Ab.Xa=!c,B(V(a.Na),function(a){a.Xa=!c})}
function Rd(a,b,c){if(b){var d=a.f.get(b);d?c?d.aa():d.O():Nd(a,b).Ya=c}else B(V(a.f),function(a){c?a.aa():a.O()}),a.Ab.Ya=!c,B(V(a.Na),function(a){a.Ya=!c})}r=Ld.prototype;r.ca=function(a,b){var c=i,d=i;t(a)?(c=a,d=b):u(a)&&(d=a);c?(c=this.f.get(c))&&c.ca(d):B(V(this.f),function(a){a.ca(d)})};r.stopSelection=function(a){a?(a=this.f.get(a))&&a.stopSelection():B(V(this.f),function(a){a.stopSelection()})};
r.K=function(a,b){if(Sd(this,a.src)){var c=this.f.get(a.src);c?c.K(a,b):(this.Ma.push(a),b&&C(this.Ma,b))}};r.addHandler=function(a,b){B(V(this.f),function(c){c.addHandler(a,b)});this.hc.push({type:a,Ea:b})};r.$=function(a,b){B(V(this.f),function(c){c.$(a,b)});B(this.hc,function(c,d,e){c.type===a&&(!b||c.Ea===b)&&z.splice.call(e,d,1)})};r.Eb=function(a){this.jb.push(a);B(V(this.f),function(b){if(a.onInitAnnotator)a.onInitAnnotator(b)})};
function Sd(a,b){console.log("ANNOS====================================");console.log(a.f);console.log("====================================");console.log("====================================");console.log(a.ya);console.log("====================================");return yd(a.f.Z,b)?k:Fa(a.ya,function(c){return a.Kb(c)==b})!=m}r.destroy=function(a){if(a){var b=this.f.get(a);b&&(b.destroy(),this.f.remove(a))}else B(V(this.f),function(a){a.destroy()}),this.f.clear()};
r.oa=function(a){if(Sd(this,a)&&(a=this.f.get(a)))return a.oa().getName()};r.w=function(a){if(a){var b=this.f.get(a);return b?b.w():Ca(this.Ma,function(b){return b.src==a})}var c=[];B(V(this.f),function(a){Ia(c,a.w())});Ia(c,this.Ma);return c};r.pa=function(a){if(Sd(this,a)&&(a=this.f.get(a)))return Da(a.pa(),function(a){return a.getName()})};r.ga=function(a){Qd(this,a,n)};r.O=function(a){Rd(this,a,n)};r.z=function(a){if(a){if(Sd(this,a.src)){var b=this.f.get(a.src);b&&b.z(a)}}else B(V(this.f),function(a){a.z()})};
r.init=function(){this.hd&&Ia(this.ya,this.hd());Pd(this);var a=this,b=M(window,"scroll",function(){0<a.ya.length?Pd(a):N(b)})};r.Bc=function(a,b,c){this.$b(a)&&Od(this,a,b,c)};r.F=function(a){if(Sd(this,a.src)){var b=this.f.get(a.src);b?b.F(a):this.dc.push(a)}};r.xb=function(a,b){if(Sd(this,a)){var c=this.f.get(a);c&&c.Qd(b)}};r.ia=function(a){this.Oa=a;B(V(this.f),function(b){b.ia(a)})};r.Ja=function(a){Qd(this,a,k)};r.aa=function(a){Rd(this,a,k)};function Td(a,b){var c=ub().createElement("DIV");c.innerHTML=a(b||Ud,i,i);if(1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType)return d}return c}var Ud={};function Vd(a,b){a!=m&&this.append.apply(this,arguments)}r=Vd.prototype;r.Ca="";r.set=function(a){this.Ca=""+a};r.append=function(a,b,c){this.Ca+=a;if(b!=m)for(var d=1;d<arguments.length;d++)this.Ca+=arguments[d];return this};r.clear=function(){this.Ca=""};r.toString=p("Ca");/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

*/
function Wd(){}
var Xd={Ge:"<",Fe:">",ye:"&",He:"\u00a0",Je:'"',ze:"'"},Yd={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:20,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,
ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:20,select:0,small:0,span:0,strike:0,strong:0,style:20,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},Zd=/&/g,$d=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,ae=/</g,be=/>/g,ce=/\"/g,de=/=/g,ee=/\0/g,fe=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,ge=/^#(\d+)$/,he=/^#x([0-9A-Fa-f]+)$/,ie=RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[^a-z\\s>]+)",
"i"),je=RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<[!]--[\\s\\S]*?--\>|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i");
Wd.prototype.parse=function(a,b){var c=m,d=n,e=[],f,h,j;a.R=[];for(a.ra=n;b;){var l=b.match(d?ie:je),b=b.substring(l[0].length);if(d)if(l[1]){var q=l[1].toLowerCase();if(l[2]){l=l[3];switch(l.charCodeAt(0)){case 34:case 39:l=l.substring(1,l.length-1)}l=l.replace(ee,"").replace(fe,qa(this.ke,this))}else l=q;e.push(q,l)}else l[4]&&(h!==i&&(j?a.Rd&&a.Rd(f,e):a.ud&&a.ud(f)),j&&h&12&&(c=c===m?b.toLowerCase():c.substring(c.length-b.length),d=c.indexOf("</"+f),0>d&&(d=b.length),h&4?a.nd&&a.nd(b.substring(0,
d)):a.Pd&&a.Pd(b.substring(0,d).replace($d,"&amp;$1").replace(ae,"&lt;").replace(be,"&gt;")),b=b.substring(d)),f=h=j=i,e.length=0,d=n);else if(l[1])ke(a,l[0]);else if(l[3])j=!l[2],d=k,f=l[3].toLowerCase(),h=Yd.hasOwnProperty(f)?Yd[f]:i;else if(l[4])ke(a,l[4]);else if(l[5])switch(l[5]){case "<":ke(a,"&lt;");break;case ">":ke(a,"&gt;");break;default:ke(a,"&amp;")}}for(c=a.R.length;0<=--c;)a.ja.append("</",a.R[c],">");a.R.length=0};
Wd.prototype.ke=function(a){a=a.toLowerCase();if(Xd.hasOwnProperty(a))return Xd[a];var b=a.match(ge);return b?String.fromCharCode(parseInt(b[1],10)):(b=a.match(he))?String.fromCharCode(parseInt(b[1],16)):""};function le(){};/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

*/
function me(a,b){var c=new Vd;(new Wd).parse(new ne(c,b,i),a);return c.toString()}function ne(a,b,c){this.ja=a;this.R=[];this.ra=n;this.Vd=b;this.Tb=c}v(ne,le);
var oe={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"*::accesskey":0,"*::tabindex":0,"*::onfocus":2,"*::onblur":2,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,
"area::href":1,"area::nohref":0,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,
"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,
"img::hspace":0,"img::ismap":0,"img::longdesc":1,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::autocomplete":0,"input::align":0,"input::alt":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,
"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,
"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,
"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,
"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};
ne.prototype.Rd=function(a,b){if(!this.ra&&Yd.hasOwnProperty(a)){var c=Yd[a];if(!(c&32))if(c&16)this.ra=!(c&2);else{for(var d=b,e=0;e<d.length;e+=2){var f=d[e],h=d[e+1],j=m,l;if((l=a+"::"+f,oe.hasOwnProperty(l))||(l="*::"+f,oe.hasOwnProperty(l)))j=oe[l];if(j!==m)switch(j){case 0:break;case 2:case 3:h=m;break;case 4:case 5:case 6:case 7:case 8:case 9:h=this.Tb?this.Tb(h):h;break;case 1:h=this.Vd&&this.Vd(h);break;case 11:h&&"#"===h.charAt(0)?(h=this.Tb?this.Tb(h):h)&&(h="#"+h):h=m;break;default:h=
m}else h=m;d[e+1]=h}if(b=d){c&2||this.R.push(a);this.ja.append("<",a);c=0;for(d=b.length;c<d;c+=2)e=b[c],f=b[c+1],f!==m&&f!==i&&this.ja.append(" ",e,'="',f.replace(Zd,"&amp;").replace(ae,"&lt;").replace(be,"&gt;").replace(ce,"&#34;").replace(de,"&#61;"),'"');this.ja.append(">")}}}};
ne.prototype.ud=function(a){if(this.ra)this.ra=n;else if(Yd.hasOwnProperty(a)){var b=Yd[a];if(!(b&50)){if(b&1)for(b=this.R.length;0<=--b;){var c=this.R[b];if(c===a)break;if(!(Yd[c]&1))return}else for(b=this.R.length;0<=--b&&this.R[b]!==a;);if(!(0>b)){for(var d=this.R.length;--d>b;)c=this.R[d],Yd[c]&1||this.ja.append("</",c,">");this.R.length=b;this.ja.append("</",a,">")}}}};function ke(a,b){a.ra||a.ja.append(b)}ne.prototype.Pd=function(a){this.ra||this.ja.append(a)};
ne.prototype.nd=function(a){this.ra||this.ja.append(a)};function pe(a,b,c,d,e){if(!D&&(!F||!G("525")))return k;if(Qa&&e)return qe(a);if(e&&!d||!c&&(17==b||18==b)||D&&d&&b==a)return n;switch(a){case 13:return!(D&&gb(9));case 27:return!F}return qe(a)}function qe(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||F&&0==a)return k;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return k;default:return n}}
function re(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function se(a,b){qc.call(this);a&&te(this,a,b)}v(se,Mc);r=se.prototype;r.I=m;r.Nb=m;r.yc=m;r.Ob=m;r.ta=-1;r.sa=-1;r.qc=n;
var ue={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},ve={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},we=D||F&&G("525"),xe=Qa&&E;r=se.prototype;
r.ee=function(a){if(F&&(17==this.ta&&!a.ctrlKey||18==this.ta&&!a.altKey))this.sa=this.ta=-1;we&&!pe(a.keyCode,this.ta,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.sa=E?re(a.keyCode):a.keyCode,xe&&(this.qc=a.altKey))};r.ge=function(a){this.sa=this.ta=-1;this.qc=a.altKey};
r.handleEvent=function(a){var b=a.t,c,d,e=b.altKey;D&&"keypress"==a.type?(c=this.sa,d=13!=c&&27!=c?b.keyCode:0):F&&"keypress"==a.type?(c=this.sa,d=0<=b.charCode&&63232>b.charCode&&qe(c)?b.charCode:0):Va?(c=this.sa,d=qe(c)?b.keyCode:0):(c=b.keyCode||this.sa,d=b.charCode||0,xe&&(e=this.qc),Qa&&(63==d&&224==c)&&(c=191));var f=c,h=b.keyIdentifier;c?63232<=c&&c in ue?f=ue[c]:25==c&&a.shiftKey&&(f=9):h&&h in ve&&(f=ve[h]);a=f==this.ta;this.ta=f;b=new ye(f,d,a,b);b.altKey=e;this.dispatchEvent(b)};r.e=p("I");
function te(a,b,c){a.Ob&&a.detach();a.I=b;a.Nb=M(a.I,"keypress",a,c);a.yc=M(a.I,"keydown",a.ee,c,a);a.Ob=M(a.I,"keyup",a.ge,c,a)}r.detach=function(){this.Nb&&(N(this.Nb),N(this.yc),N(this.Ob),this.Ob=this.yc=this.Nb=m);this.I=m;this.sa=this.ta=-1};function ye(a,b,c,d){d&&this.init(d,i);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}v(ye,vc);function ze(){}ga(ze);ze.prototype.oe=0;ze.ub();function Ae(a){qc.call(this);this.qb=a||ub();this.ua=Be}v(Ae,Mc);Ae.prototype.ie=ze.ub();var Be=m;function Ce(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}g(Error("Invalid component state"))}r=Ae.prototype;r.Mb=m;r.ha=n;r.I=m;r.ua=m;r.Fa=m;r.nb=m;r.Ra=m;r.we=n;r.e=p("I");
r.Jb=function(){return this.wc||(this.wc=new Jc(this))};r.Kc=function(a){this.Fa&&this.Fa!=a&&g(Error("Method not supported"));Ae.L.Kc.call(this,a)};r.wd=p("qb");r.pb=function(a){this.ha&&g(Error("Component already rendered"));if(a&&this.mb(a)){this.we=k;if(!this.qb||this.qb.N!=J(a))this.qb=ub(a);this.pd(a);this.Ua()}else g(Error("Invalid element to decorate"))};r.mb=ca(k);r.pd=function(a){this.I=a};r.Ua=function(){function a(a){!a.ha&&a.e()&&a.Ua()}this.ha=k;this.nb&&B(this.nb,a,i)};
r.Ib=function(){function a(a){a.ha&&a.Ib()}this.nb&&B(this.nb,a,i);this.wc&&this.wc.Xb();this.ha=n};r.sb=p("I");r.bb=function(a){this.ha&&g(Error("Component already rendered"));this.ua=a};
r.removeChild=function(a,b){if(a){var c=t(a)?a:a.Mb||(a.Mb=":"+(a.ie.oe++).toString(36)),d;this.Ra&&c?(d=this.Ra,d=(c in d?d[c]:i)||m):d=m;a=d;c&&a&&(d=this.Ra,c in d&&delete d[c],C(this.nb,a),b&&(a.Ib(),a.I&&Cb(a.I)),c=a,c==m&&g(Error("Unable to set parent component")),c.Fa=m,Ae.L.Kc.call(c,m))}a||g(Error("Child is not in parent component"));return a};function De(){}var Ee;ga(De);r=De.prototype;r.sb=aa();r.rb=function(a,b,c){if(a=a.e?a.e():a)if(D&&!G("7")){var d=Fe(kb(a),b);d.push(b);ra(c?lb:nb,a).apply(m,d)}else c?lb(a,b):nb(a,b)};r.mb=ca(k);
r.pb=function(a,b){if(b.id){var c=b.id;if(a.Fa&&a.Fa.Ra){var d=a.Fa.Ra,e=a.Mb;e in d&&delete d[e];d=a.Fa.Ra;c in d&&g(Error('The object already contains the key "'+c+'"'));d[c]=a}a.Mb=c}(c=this.sb(b))&&c.firstChild?(c=c.firstChild.nextSibling?Ha(c.childNodes):c.firstChild,a.ob=c):a.ob=m;var f=0,h=this.tb(),j=this.tb(),l=n,q=n,c=n,d=kb(b);B(d,function(a){if(!l&&a==h)l=k,j==h&&(q=k);else if(!q&&a==j)q=k;else{var b=f;if(!this.Ud){this.Gb||Ge(this);var c=this.Gb,d={},e;for(e in c)d[c[e]]=e;this.Ud=d}a=
parseInt(this.Ud[a],10);f=b|(isNaN(a)?0:a)}},this);a.A=f;l||(d.push(h),j==h&&(q=k));q||d.push(j);(e=a.ea)&&d.push.apply(d,e);if(D&&!G("7")){var w=Fe(d);0<w.length&&(d.push.apply(d,w),c=k)}if(!l||!q||e||c)b.className=d.join(" ");a.isEnabled()||this.cb(b,1,k);a.A&8&&this.cb(b,8,k);a.W&16&&this.cb(b,16,!!(a.A&16));a.W&64&&this.cb(b,64,!!(a.A&64));return b};
r.Zb=function(a,b){var c=!b,d=D||Va?a.getElementsByTagName("*"):m;if(ed){if(c=c?"none":"",a.style[ed]=c,d)for(var e=0,f;f=d[e];e++)f.style[ed]=c}else if(D||Va)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(e=0;f=d[e];e++)f.setAttribute("unselectable",c)};r.bb=function(a,b){this.rb(a,this.tb()+"-rtl",b)};r.Jd=function(a){var b;return a.W&32&&(b=a.Va())?Fb(b):n};
r.Jc=function(a,b){var c;if(a.W&32&&(c=a.Va())){if(!b&&a.A&32){try{c.blur()}catch(d){}a.A&32&&a.yd()}Fb(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};r.Q=function(a,b,c){var d=a.e();if(d){var e;this.Gb||Ge(this);(e=this.Gb[b])&&this.rb(a,e,c);this.cb(d,b,c)}};r.cb=function(a,b,c){Ee||(Ee={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=Ee[b])&&a.setAttribute("aria-"+b,c)};
r.va=function(a,b){var c=this.sb(a);if(c&&(Bb(c),b))if(t(b))if("textContent"in c)c.textContent=b;else if(c.firstChild&&3==c.firstChild.nodeType){for(;c.lastChild!=c.firstChild;)c.removeChild(c.lastChild);c.firstChild.data=b}else Bb(c),c.appendChild(J(c).createTextNode(b));else{var d=function(a){if(a){var b=J(c);c.appendChild(t(a)?b.createTextNode(a):a)}};ia(b)?B(b,d):ja(b)&&!("nodeType"in b)?B(Ha(b),d):d(b)}};r.Va=function(a){return a.e()};r.tb=ca("goog-control");
function Fe(a,b){var c=[];b&&(a=a.concat([b]));B([],function(d){Ea(d,ra(Ga,a))&&(!b||Ga(d,b))&&c.push(d.join("_"))});return c}function Ge(a){var b=a.tb();a.Gb={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};var He={};function Ie(a,b,c){Ae.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=la(b);if(d=He[d])break;b=b.L?b.L.constructor:m}b=d?u(d.ub)?d.ub():new d:m}this.J=b;this.ob=a}v(Ie,Ae);r=Ie.prototype;r.ob=m;r.A=0;r.W=39;r.sc=255;r.ve=0;r.bc=k;r.ea=m;r.xc=k;r.pc=n;r.re=m;function Je(a){a.ha&&n!=a.xc&&Ke(a,n);a.xc=n}r.Va=function(){return this.J.Va(this)};
r.rb=function(a,b){b?a&&(this.ea?Ga(this.ea,a)||this.ea.push(a):this.ea=[a],this.J.rb(this,a,k)):a&&this.ea&&(C(this.ea,a),0==this.ea.length&&(this.ea=m),this.J.rb(this,a,n))};r.sb=function(){return this.J.sb(this.e())};r.mb=function(a){return this.J.mb(a)};r.pd=function(a){this.I=a=this.J.pb(this,a);var b=this.re||i;b&&a.setAttribute("role",b);this.pc||this.J.Zb(a,n);this.bc="none"!=a.style.display};
r.Ua=function(){Ie.L.Ua.call(this);var a=this.J;this.ua==m&&(this.ua=dd(this.ha?this.I:this.qb.N.body));this.ua&&a.bb(this.e(),k);this.isEnabled()&&a.Jc(this,this.bc);if(this.W&-2&&(this.xc&&Ke(this,k),this.W&32&&(a=this.Va()))){var b=this.zc||(this.zc=new se);te(b,a);O(O(O(this.Jb(),b,"key",this.fe),a,"focus",this.de),a,"blur",this.yd)}};
function Ke(a,b){var c=a.Jb(),d=a.e();b?(O(O(O(O(c,d,"mouseover",a.Cd),d,"mousedown",a.Ad),d,"mouseup",a.Dd),d,"mouseout",a.Bd),a.Lb!=fa&&O(c,d,"contextmenu",a.Lb),D&&O(c,d,"dblclick",a.zd)):(Lc(Lc(Lc(Lc(c,d,"mouseover",a.Cd),d,"mousedown",a.Ad),d,"mouseup",a.Dd),d,"mouseout",a.Bd),a.Lb!=fa&&Lc(c,d,"contextmenu",a.Lb),D&&Lc(c,d,"dblclick",a.zd))}r.Ib=function(){Ie.L.Ib.call(this);this.zc&&this.zc.detach();this.bc&&this.isEnabled()&&this.J.Jc(this,n)};
r.va=function(a){this.J.va(this.e(),a);this.ob=a};r.bb=function(a){Ie.L.bb.call(this,a);var b=this.e();b&&this.J.bb(b,a)};r.Zb=function(a){this.pc=a;var b=this.e();b&&this.J.Zb(b,a)};r.isEnabled=function(){return!(this.A&1)};function Le(a,b){Me(a,2,b)&&a.Q(2,b)}r.setActive=function(a){Me(this,4,a)&&this.Q(4,a)};r.Q=function(a,b){this.W&a&&b!=!!(this.A&a)&&(this.J.Q(this,a,b),this.A=b?this.A|a:this.A&~a)};function X(a,b){return!!(a.sc&b)&&!!(a.W&b)}
function Me(a,b,c){return!!(a.W&b)&&!!(a.A&b)!=c&&(!(a.ve&b)||a.dispatchEvent(Ce(b,c)))&&!a.rd}r.Cd=function(a){(!a.relatedTarget||!Eb(this.e(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&X(this,2))&&Le(this,k)};r.Bd=function(a){if((!a.relatedTarget||!Eb(this.e(),a.relatedTarget))&&this.dispatchEvent("leave"))X(this,4)&&this.setActive(n),X(this,2)&&Le(this,n)};r.Lb=fa;
r.Ad=function(a){this.isEnabled()&&(X(this,2)&&Le(this,k),xc(a)&&(X(this,4)&&this.setActive(k),this.J.Jd(this)&&this.Va().focus()));!this.pc&&xc(a)&&a.preventDefault()};r.Dd=function(a){this.isEnabled()&&(X(this,2)&&Le(this,k),this.A&4&&(Ne(this,a)&&X(this,4))&&this.setActive(n))};r.zd=function(a){this.isEnabled()&&Ne(this,a)};
function Ne(a,b){if(X(a,16)){var c=!(a.A&16);Me(a,16,c)&&a.Q(16,c)}X(a,8)&&Me(a,8,k)&&a.Q(8,k);X(a,64)&&(c=!(a.A&64),Me(a,64,c)&&a.Q(64,c));c=new sc("action",a);b&&(c.altKey=b.altKey,c.ctrlKey=b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey,c.Gc=b.Gc);return a.dispatchEvent(c)}r.de=function(){X(this,32)&&Me(this,32,k)&&this.Q(32,k)};r.yd=function(){X(this,4)&&this.setActive(n);X(this,32)&&Me(this,32,n)&&this.Q(32,n)};
r.fe=function(a){return this.bc&&this.isEnabled()&&13==a.keyCode&&Ne(this,a)?(a.preventDefault(),a.stopPropagation(),k):n};u(Ie)||g(Error("Invalid component class "+Ie));u(De)||g(Error("Invalid renderer class "+De));var Oe=la(Ie);He[Oe]=De;function Qe(){return new Ie(m)}u(Qe)||g(Error("Invalid decorator function "+Qe));function Re(){}v(Re,De);ga(Re);r=Re.prototype;r.pb=function(a,b){Je(a);a.sc&=-256;a.ha&&a.A&32&&g(Error("Component already rendered"));a.A&32&&a.Q(32,n);a.W&=-33;Re.L.pb.call(this,a,b);a.va(b.value);return b};r.mb=function(a){return"TEXTAREA"==a.tagName};r.bb=fa;r.Jd=function(a){return a.isEnabled()};r.Jc=fa;r.Q=function(a,b,c){Re.L.Q.call(this,a,b,c);if((a=a.e())&&1==b)a.disabled=c};r.cb=fa;r.va=function(a,b){a&&(a.value=b)};r.tb=ca("goog-textarea");function Se(a,b,c){Ie.call(this,a,b||Re.ub(),c);Je(this);this.Zb(k);a||(this.ob="")}v(Se,Ie);var Te=E||F;r=Se.prototype;r.Za=n;r.qa=0;r.le=0;r.Md=0;r.Fd=n;r.Sb=n;r.Ic=n;r.Hc=n;function Ue(a){return a.wb.top+a.wb.bottom+a.ld.top+a.ld.bottom}function Ve(a){var b=a.Md,c=a.e();b&&(c&&a.Sb)&&(b-=Ue(a));return b}function We(a){var b=a.le,c=a.e();b&&(c&&a.Sb)&&(b-=Ue(a));return b}r.va=function(a){Se.L.va.call(this,a);this.e()&&this.Wa()};
r.Ua=function(){Se.L.Ua.call(this);var a=this.e();Q(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.wb=gd(a,"padding");this.ld=jd(a);O(O(O(O(this.Jb(),a,"scroll",this.Wa),a,"focus",this.Wa),a,"keyup",this.Wa),a,"mouseup",this.ne);this.e()&&this.Wa()};
function Xe(a){if(!a.Fd){var b=a.e().cloneNode(n);Q(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.wd().N.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.Ic=d>c;b.style.borderWidth="10px";a.Hc=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.Sb=k);Cb(b);a.Fd=k}var b=a.e(),c=a.e().scrollHeight,e=a.e(),d=e.offsetHeight-e.clientHeight;if(!a.Ic)var f=a.wb,d=d-(f.top+f.bottom);
a.Hc||(e=jd(e),d-=e.top+e.bottom);c+=0<d?d:0;a.Sb?c-=Ue(a):(a.Ic||(d=a.wb,c+=d.top+d.bottom),a.Hc||(a=jd(b),c+=a.top+a.bottom));return c}function Ye(a,b){a.qa!=b&&(a.qa=b,a.e().style.height=b+"px")}function Ze(a){a=a.e();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
r.Wa=function(){if(!this.Za){var a=n;this.Za=k;var b=this.e(),c=this.qa;if(b.scrollHeight){var d=n,e=n,f=Xe(this),h=b.offsetHeight,j=Ve(this),l=We(this);j&&f<j?(Ye(this,j),d=k):l&&f>l?(Ye(this,l),b.style.overflowY="",e=k):h!=f?Ye(this,f):this.qa||(this.qa=f);!d&&(!e&&Te)&&(a=k)}else Ze(this);this.Za=n;a&&(a=this.e(),this.Za||(this.Za=k,b=n,a.value||(a.value=" ",b=k),(e=a.scrollHeight)?(f=Xe(this),d=Ve(this),h=We(this),!(d&&f<=d)&&!(h&&f>=h)&&(h=this.wb,a.style.paddingBottom=h.bottom+1+"px",Xe(this)==
f&&(a.style.paddingBottom=h.bottom+e+"px",a.scrollTop=0,e=Xe(this)-e,e>=d?Ye(this,e):Ye(this,d)),a.style.paddingBottom=h.bottom+"px")):Ze(this),b&&(a.value=""),this.Za=n));c!=this.qa&&this.dispatchEvent("resize")}};r.ne=function(){var a=this.e(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.qa&&(this.qa=this.Md=b)};D&&G(8);function $e(a){return"object"===typeof a&&a&&0===a.Be?a.content:String(a).replace(af,bf)}var cf={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function bf(a){return cf[a]}var af=/[\x00\x22\x26\x27\x3c\x3e]/g;function df(){return'<div class="annotorious-popup top-left" style="position:absolute;z-index:1"><div class="annotorious-popup-buttons"><a class="annotorious-popup-button annotorious-popup-button-edit" title="Edit" href="javascript:void(0);">EDIT</a><a class="annotorious-popup-button annotorious-popup-button-delete" title="Delete" href="javascript:void(0);">DELETE</a></div><span class="annotorious-popup-text"></span><span class="annotorious-popup-select-text"></span></div>'}
function ef(){return'<div class="annotorious-editor" style="position:absolute;z-index:1"><form><textarea class="annotorious-editor-text" placeholder="Add a No Comment..." tabindex="1"></textarea><select id="mySelect" class="annotorious-popup-select" tabindex="4"></select><div class="annotorious-editor-button-container"><a class="annotorious-editor-button annotorious-editor-button-cancel" href="javascript:void(0);" tabindex="3">Cancel</a><a class="annotorious-editor-button annotorious-editor-button-save" href="javascript:void(0);" tabindex="2">Save</a></div></form></div>'};function ff(a){function b(){var a=d.Qa;a.e()&&a.Wa()}this.element=Td(ef);this.d=a;this.Zd=a.getItem();this.Qa=new Se("");this.Aa=K(".annotorious-popup-select",this.element)[0];this.Wd=K(".annotorious-editor-button-cancel",this.element)[0];this.Zc=K(".annotorious-editor-button-save",this.element)[0];var c;c=this.Zc;jb?c=c.parentElement:(c=c.parentNode,c=Db(c)?c:m);this.Xd=c;this.fb=[];var d=this;M(this.Wd,"click",function(b){b.preventDefault();a.stopSelection(d.fd);d.close()});M(this.Zc,"click",function(b){b.preventDefault();
b=d.vd();a.K(b);a.stopSelection();d.fd?a.fireEvent("onAnnotationUpdated",b,a.getItem()):a.fireEvent("onAnnotationCreated",b,a.getItem());d.close()});U(this.element,n);a.element.appendChild(this.element);this.Qa.pb(K(".annotorious-editor-text",this.element)[0]);var e=this.element;c=document.createElement("div");Q(c,"position","absolute");Q(c,"top","0px");Q(c,"right","0px");Q(c,"width","5px");Q(c,"height","100%");Q(c,"cursor","e-resize");e.appendChild(c);var f=jd(e),f=cd(e).width-f.right-f.left;c=new kd(c);
c.Ac=new Oc(f,0,800,0)||new Oc(NaN,NaN,NaN,NaN);c.qd=function(a){Q(e,"width",a+"px");b&&b()}}r=ff.prototype;r.oc=function(a){var b=zb("div","annotorious-editor-field");t(a)?b.innerHTML=a:u(a)?this.fb.push({H:b,uc:a}):Db(a)&&b.appendChild(a);a=this.Xd;a.parentNode&&a.parentNode.insertBefore(b,a)};
r.open=function(a,b){this.d.fireEvent("beforeEditorShown",a);(this.Pa=this.fd=a)&&this.Qa.va(String(a.text));U(this.element,k);this.Qa.e().focus();console.log("opt_event====================================");console.log(this.Aa);console.log("====================================");var c=this;b&&b.Ka&&(c.Aa.length=0,B(b.Ka,function(a,b){var f=document.createElement("option");f.text=a;c.Aa.add(f,c.Aa[b])}));if(a.j||a.tag)this.Aa.selectedIndex=b.Ka.indexOf(a.j||a.tag);B(this.fb,function(b){var c=b.uc(a);
t(c)?b.H.innerHTML=c:Db(c)&&(Bb(b.H),b.H.appendChild(c))});this.d.fireEvent("onEditorShown",a)};r.close=function(){U(this.element,n);this.Qa.va("")};r.setPosition=function(a){Sc(this.element,a.x,a.y)};
r.vd=function(){var a=me(this.Qa.e().value,aa()),b=me(this.Aa.options[this.Aa.selectedIndex].value,aa());console.log("getAnotation====================================");console.log(b);console.log("====================================");this.Pa?(this.Pa.text=a,this.Pa.j=b):this.Pa=new Kd(this.Zd.src,a,this.d.oa().getShape(),b);console.log("====================================");console.log(this.Pa);console.log("====================================");return this.Pa};ff.prototype.addField=ff.prototype.oc;
ff.prototype.getAnnotation=ff.prototype.vd;function gf(a,b,c){var d=this;c||(c="Click and Drag to Annotate");this.element=Td(hf,{Rb:c});this.d=a;this.bd=K(".annotorious-hint-msg",this.element)[0];this.$c=K(".annotorious-hint-icon",this.element)[0];this.mc=function(){d.show()};this.lc=function(){jf(d)};this.cc();jf(this);b.appendChild(this.element)}
gf.prototype.cc=function(){var a=this;this.ed=M(this.$c,"mouseover",function(){a.show();window.clearTimeout(a.ic)});this.cd=M(this.$c,"mouseout",function(){jf(a)});this.d.addHandler("onMouseOverItem",this.mc);this.d.addHandler("onMouseOutOfItem",this.lc)};gf.prototype.Bb=function(){N(this.ed);N(this.cd);this.d.$("onMouseOverItem",this.mc);this.d.$("onMouseOutOfItem",this.lc)};
gf.prototype.show=function(){window.clearTimeout(this.ic);S(this.bd,0.8);var a=this;this.ic=window.setTimeout(function(){jf(a)},3E3)};function jf(a){window.clearTimeout(a.ic);S(a.bd,0)}gf.prototype.destroy=function(){this.Bb();delete this.ed;delete this.cd;delete this.mc;delete this.lc;Cb(this.element)};function kf(a){this.element=Td(df);this.d=a;this.ae=K(".annotorious-popup-text",this.element)[0];this.$d=K(".annotorious-popup-select-text",this.element)[0];this.S=K(".annotorious-popup-buttons",this.element)[0];this.fc=n;this.fb=[];this.Yd=[];var b=K(".annotorious-popup-button-edit",this.S)[0],c=K(".annotorious-popup-button-delete",this.S)[0],d=this;M(b,"mouseover",function(){lb(b,"annotorious-popup-button-active")});M(b,"mouseout",function(){nb(b,"annotorious-popup-button-active")});M(b,"click",
function(){S(d.element,0);Q(d.element,"pointer-events","none");a.tc(d.g)});M(c,"mouseover",function(){lb(c,"annotorious-popup-button-active")});M(c,"mouseout",function(){nb(c,"annotorious-popup-button-active")});M(c,"click",function(){a.fireEvent("beforeAnnotationRemoved",d.g)||(S(d.element,0),Q(d.element,"pointer-events","none"),a.F(d.g),a.fireEvent("onAnnotationRemoved",d.g))});lf&&(M(this.element,"mouseover",function(){window.clearTimeout(d.ec);0.9>(d.S.style[Aa("opacity")]||"")&&S(d.S,0.9);d.clearHideTimer()}),
M(this.element,"mouseout",function(){S(d.S,0);d.startHideTimer()}),a.addHandler("onMouseOutOfItem",function(){d.startHideTimer()}));S(this.S,0);S(this.element,0);Q(this.element,"pointer-events","none");a.element.appendChild(this.element)}r=kf.prototype;r.oc=function(a){var b=zb("div","annotorious-popup-field");t(a)?b.innerHTML=a:u(a)?this.fb.push({H:b,uc:a}):Db(a)&&b.appendChild(a);this.element.appendChild(b)};
r.startHideTimer=function(){this.fc=n;if(!this.kb){var a=this;this.kb=window.setTimeout(function(){a.d.fireEvent("beforePopupHide",a);a.fc||(S(a.element,0),Q(a.element,"pointer-events","none"),S(a.S,0.9),delete a.kb)},150)}};r.clearHideTimer=function(){this.fc=k;this.kb&&(window.clearTimeout(this.kb),delete this.kb)};
r.show=function(a,b){this.clearHideTimer();console.log("popup_show====================================");console.log(a);console.log("====================================");b&&this.setPosition(b);a&&this.setAnnotation(a);this.ec&&window.clearTimeout(this.ec);S(this.S,0.9);if(lf){var c=this;this.ec=window.setTimeout(function(){S(c.S,0)},1E3)}S(this.element,0.9);Q(this.element,"pointer-events","auto");this.d.fireEvent("onPopupShown",this.g)};r.setPosition=function(a){Sc(this.element,new I(a.x,a.y))};
r.setAnnotation=function(a){this.g=a;this.ae.innerHTML=a.text?a.text.replace(/\n/g,"<br/>"):'<span class="annotorious-popup-empty">No comment</span>';console.log("setAnnotation====================================");console.log(a.j);console.log(a);console.log(a.tag);console.log("====================================");this.$d.innerHTML=a.j||a.tag?a.j||a.tag:'<span class="annotorious-popup-empty">No Tag</span>';"editable"in a&&a.editable==n?U(this.S,n):U(this.S,k);B(this.fb,function(b){var c=b.uc(a);
t(c)?b.H.innerHTML=c:Db(c)&&(Bb(b.H),b.H.appendChild(c))})};kf.prototype.addField=kf.prototype.oc;function mf(){}r=mf.prototype;r.K=function(a,b){this.h.K(a,b)};r.addHandler=function(a,b){this.B.addHandler(a,b)};r.$=function(a){this.B.$(a)};r.fireEvent=function(a,b,c){return this.B.fireEvent(a,b,c)};r.oa=p("C");r.z=function(a){this.h.z(a)};r.F=function(a){this.h.F(a)};r.$=function(a,b){this.B.$(a,b)};r.stopSelection=function(a){lf&&U(this.c,n);this.lb&&(this.lb(),delete this.lb);this.C.stopSelection();a&&this.h.K(a)};
function nf(a,b){M(b,of,function(c){console.log("start selection event");console.log(c);c=pf(c,b);a.h.z(n);a.Db?(U(a.c,k),a.C.startSelection(c.x,c.y)):(c=a.h.fa(c.x,c.y),0<c.length&&a.h.z(c[0]))})};function qf(a,b){this.X=a;this.d=b;this.La=[];this.D=[];this.xa=this.X.getContext("2d");this.wa=k;this.Cb=n;var c=this;M(this.X,rf,function(a){if(c.wa){var b=c.Lc(a.offsetX,a.offsetY);b?(c.Cb=c.Cb&&b==c.g,c.g?c.g!=b&&(c.wa=n,c.d.popup.startHideTimer()):(c.g=b,sf(c),c.d.fireEvent("onMouseOverAnnotation",{o:c.g,mouseEvent:a}))):!c.Cb&&c.g&&(c.wa=n,c.d.popup.startHideTimer())}else c.eb=a});M(this.X,of,function(){c.g!==i&&c.g!=n&&c.d.fireEvent("onAnnotationClicked",c.g)});b.addHandler("onMouseOutOfItem",
function(){delete c.g;c.wa=k});b.addHandler("beforePopupHide",function(){if(!c.wa&&c.eb){var a=c.g;c.g=c.Lc(c.eb.offsetX,c.eb.offsetY);c.wa=k;a!=c.g?(sf(c),c.d.fireEvent("onMouseOutOfAnnotation",{o:a,mouseEvent:c.eb}),c.d.fireEvent("onMouseOverAnnotation",{o:c.g,mouseEvent:c.eb})):c.g&&c.d.popup.clearHideTimer()}else sf(c)})}r=qf.prototype;
r.K=function(a,b){b&&(b==this.g&&delete this.g,C(this.La,b),delete this.D[W(b.shapes[0])]);this.La.push(a);var c=a.shapes[0];if("pixel"!=c.units)var d=this,c=Jd(c,function(a){return d.d.na(a)});this.D[W(a.shapes[0])]=c;sf(this)};r.F=function(a){a==this.g&&delete this.g;C(this.La,a);delete this.D[W(a.shapes[0])];sf(this)};r.w=function(){return Ha(this.La)};r.z=function(a){(this.g=a)?this.Cb=k:this.d.popup.startHideTimer();sf(this);this.wa=k};r.Lc=function(a,b){var c=this.fa(a,b);if(0<c.length)return c[0]};
r.fa=function(a,b){var c=[],d=this;B(this.La,function(e){Fd(d.D[W(e.shapes[0])],a,b)&&c.push(e)});Ka(c,function(a,b){var c=d.D[W(a.shapes[0])],j=d.D[W(b.shapes[0])];return Gd(c)-Gd(j)});return c};function tf(a,b,c,d){var e=Fa(a.d.pa(),function(a){return a.getSupportedShapeType()==b.type});e?(console.log("TAG===================================="),console.log(d),console.log("===================================="),e.drawShape(a.xa,b,c,d)):console.log("WARNING unsupported shape type: "+b.type)}
function sf(a){a.xa.clearRect(0,0,a.X.width,a.X.height);B(a.La,function(b){b!=a.g&&console.log("EDIT SHAPE====================================");console.log(b.j);console.log(b);console.log("====================================");tf(a,a.D[W(b.shapes[0])],n,b.j)});if(a.g){var b=a.D[W(a.g.shapes[0])];tf(a,b,k);b=Hd(b).geometry;a.d.popup.show(a.g,new zd(b.x,b.y+b.height+5))}};var uf="ontouchstart"in window,lf=!uf,of=uf?"touchstart":"mousedown",vf=uf?"touchenter":"mouseover",rf=uf?"touchmove":"mousemove",wf=uf?"touchend":"mouseup",xf=uf?"touchleave":"mouseout";function pf(a,b){var c=n;a.offsetX=a.offsetX?a.offsetX:n;a.offsetY=a.offsetY?a.offsetY:n;return c=(!a.offsetX||!a.offsetY)&&a.t.changedTouches?{x:a.t.changedTouches[0].clientX-td(b).left,y:a.t.changedTouches[0].clientY-td(b).top}:{x:a.offsetX,y:a.offsetY}};function yf(){}r=yf.prototype;r.init=function(a,b){this.Uc="#000000";this.Wc="#ffffff";this.Oc=n;this.Qc="#000000";this.Sc="#fff000";this.Pc=n;this.Rc=this.Xc=this.Vc=1;this.Tc=1.2;this.X=b;this.d=a;this.xa=b.getContext("2d");this.xa.lineWidth=1;this.gc=n};
r.cc=function(){var a=this,b=this.X;this.jc=M(this.X,rf,function(c){c=pf(c,b);if(a.gc){a.G={x:c.x,y:c.y};a.xa.clearRect(0,0,b.width,b.height);var c=a.G.x-a.M.x,d=a.G.y-a.M.y;a.drawShape(a.xa,{type:"rect",geometry:{x:0<c?a.M.x:a.G.x,y:0<d?a.M.y:a.G.y,width:Math.abs(c),height:Math.abs(d)},style:{}})}});this.kc=M(b,wf,function(c){var d=pf(c,b),e=a.getShape(),c=c.t?c.t:c;a.gc=n;console.log("EVENT TAGS====================================");console.log(a.yb);console.log("====================================");
e?(a.Bb(),a.d.fireEvent("onSelectionCompleted",{mouseEvent:c,shape:e,viewportBounds:a.getViewportBounds(),Ka:a.yb})):(a.d.fireEvent("onSelectionCanceled"),c=a.d.fa(d.x,d.y),0<c.length&&a.d.z(c[0]))})};r.Bb=function(){this.jc&&(N(this.jc),delete this.jc);this.kc&&(N(this.kc),delete this.kc)};r.getName=ca("rect_drag");r.getSupportedShapeType=ca("rect");
r.ia=function(a){console.log("==================================== PROPS");console.log(a.hasOwnProperty("tags"));console.log(a.tagsColorMap);console.log("====================================");a.hasOwnProperty("tags")&&(this.yb=a.tags);console.log(this.yb);console.log("his._TAGS====================================");a.hasOwnProperty("tagsColorMap")&&(this.Yc=a.tagsColorMap);a.hasOwnProperty("outline")&&(this.Uc=a.outline);a.hasOwnProperty("stroke")&&(this.Wc=a.stroke);a.hasOwnProperty("fill")&&(this.Oc=
a.fill);a.hasOwnProperty("hi_outline")&&(this.Qc=a.hi_outline);a.hasOwnProperty("hi_stroke")&&(this.Sc=a.hi_stroke);a.hasOwnProperty("hi_fill")&&(this.Pc=a.hi_fill);a.hasOwnProperty("outline_width")&&(this.Vc=a.outline_width);a.hasOwnProperty("stroke_width")&&(this.Xc=a.stroke_width);a.hasOwnProperty("hi_outline_width")&&(this.Rc=a.hi_outline_width);a.hasOwnProperty("hi_stroke_width")&&(this.Tc=a.hi_stroke_width)};
r.startSelection=function(a,b){var c={x:a,y:b};this.gc=k;this.cc(c);this.M=new zd(a,b);this.d.fireEvent("onSelectionStarted",{offsetX:a,offsetY:b});Q(document.body,"-webkit-user-select","none")};r.stopSelection=function(){this.Bb();this.xa.clearRect(0,0,this.X.width,this.X.height);Q(document.body,"-webkit-user-select","auto");delete this.G};
r.getShape=function(){if(this.G&&3<Math.abs(this.G.x-this.M.x)&&3<Math.abs(this.G.y-this.M.y)){var a=this.getViewportBounds(),a=this.d.ac({x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top});return new Ed("rect",a)}};r.getViewportBounds=function(){var a,b;this.G.x>this.M.x?(a=this.G.x,b=this.M.x):(a=this.M.x,b=this.G.x);var c,d;this.G.y>this.M.y?(c=this.M.y,d=this.G.y):(c=this.G.y,d=this.M.y);return{top:c,right:a,bottom:d,left:b}};r.xd=p("yb");
r.drawShape=function(a,b,c,d){console.log("DRAW====================================");console.log(d);console.log("====================================");var e,f,h,j;b.style||(b.style={});var l=m;d&&(l=Fa(this.Yc,function(a){return a.name==d}).color);console.log("DRAWCOLOR====================================");console.log(l);console.log(this.Yc);console.log("====================================");"rect"==b.type&&(c?(e=b.style.hi_fill||this.Pc,c=b.style.hi_stroke||this.Sc,f=b.style.hi_outline||this.Qc,
h=b.style.hi_outline_width||this.Rc,j=b.style.hi_stroke_width||this.Tc):(e=b.style.fill||this.Oc,c=b.style.stroke||l||this.Wc,f=b.style.outline||this.Uc,h=b.style.outline_width||this.Vc,j=b.style.stroke_width||this.Xc),b=b.geometry,console.log("===================================="),console.log(l),console.log("===================================="),f&&(a.lineJoin="round",a.lineWidth=h,a.strokeStyle=f,a.strokeRect(b.x+h/2,b.y+h/2,b.width-h,b.height-h)),c&&(a.lineJoin="miter",a.lineWidth=j,a.strokeStyle=
c,a.strokeRect(b.x+h+j/2,b.y+h+j/2,b.width-2*h-j,b.height-2*h-j)),e&&(a.lineJoin="miter",a.lineWidth=j,a.fillStyle=e,a.fillRect(b.x+h+j/2,b.y+h+j/2,b.width-2*h-j,b.height-2*h-j)))};function zf(a){return'<canvas class="annotorious-item annotorious-opacity-fade" style="position:absolute; top:0px; left:0px; width:'+$e(a.width)+"px; height:"+$e(a.height)+'px; z-index:0" width="'+$e(a.width)+'" height="'+$e(a.height)+'"></canvas>'}
function hf(a){return'<div class="annotorious-hint" style="white-space:nowrap; position:absolute; top:0px; left:0px; pointer-events:none;"><div class="annotorious-hint-msg annotorious-opacity-fade">'+$e(a.Rb)+'</div><div class="annotorious-hint-icon" style="pointer-events:auto"></div></div>'};function Af(a,b){function c(b,c){Q(d,"margin-"+b,c+"px");Q(a,"margin-"+b,0);Q(a,"padding-"+b,0)}this.ba=a;this.gd={padding:a.style.padding,margin:a.style.margin};this.B=new vd;this.ka=[];this.Db=k;this.element=zb("div","annotorious-annotationlayer");Q(this.element,"position","relative");Q(this.element,"display","inline-block");var d=this.element,e=gd(a,"margin"),f=gd(a,"padding");(0!=e.top||0!=f.top)&&c("top",e.top+f.top);(0!=e.right||0!=f.right)&&c("right",e.right+f.right);(0!=e.bottom||0!=f.bottom)&&
c("bottom",e.bottom+f.bottom);(0!=e.left||0!=f.left)&&c("left",e.left+f.left);(e=a.parentNode)&&e.replaceChild(this.element,a);this.element.appendChild(a);e=cd(a);this.la=Td(zf,{width:e.width,height:e.height});lf&&lb(this.la,"annotorious-item-unfocus");this.element.appendChild(this.la);this.c=Td(zf,{width:e.width,height:e.height});lf&&U(this.c,n);this.element.appendChild(this.c);this.popup=b?b:new kf(this);e=new yf;e.init(this,this.c);this.ka.push(e);this.C=e;this.editor=new ff(this);this.h=new qf(this.la,
this);this.hb=new gf(this,this.element);var h=this;lf&&(M(this.element,vf,function(a){a=a.relatedTarget;if(!a||!Eb(h.element,a))h.B.fireEvent("onMouseOverItem"),pb(h.la,"annotorious-item-unfocus","annotorious-item-focus")}),M(this.element,xf,function(a){a=a.relatedTarget;if(!a||!Eb(h.element,a))h.B.fireEvent("onMouseOutOfItem"),pb(h.la,"annotorious-item-focus","annotorious-item-unfocus")}));nf(this,uf?this.c:this.la);this.B.addHandler("onSelectionCompleted",function(a){var b=a.viewportBounds;h.editor.setPosition(new zd(b.left+
h.ba.offsetLeft,b.bottom+4+h.ba.offsetTop));h.editor.open(n,a)});this.B.addHandler("onSelectionCanceled",function(){lf&&U(h.c,n);h.C.stopSelection()})}v(Af,mf);r=Af.prototype;r.ca=ba();r.kd=function(a){a.init(this,this.c);this.ka.push(a)};r.destroy=function(){var a=this.ba;a.style.margin=this.gd.margin;a.style.padding=this.gd.padding;var b=this.element,c=b.parentNode;c&&c.replaceChild(a,b)};
r.tc=function(a){this.h.F(a);var b=Fa(this.ka,function(b){return b.getSupportedShapeType()==a.shapes[0].type});if(b){U(this.c,k);this.h.z(n);var c=this.c.getContext("2d"),d=a.shapes[0],e=this,d="pixel"==d.units?d:Jd(d,function(a){return e.na(a)});console.log("====================================");console.log(a.j);console.log("====================================");b.drawShape(c,d,a.j);c=b.xd()}b=Hd(a.shapes[0]).geometry;b="pixel"==a.shapes[0].units?new zd(b.x,b.y+b.height):this.na(new zd(b.x,b.y+
b.height));this.editor.setPosition(new zd(b.x+this.ba.offsetLeft,b.y+4+this.ba.offsetTop));this.editor.open(a,{Ka:c})};r.na=function(a){var b=ad(this.ba);return a.width?{x:a.x*b.width,y:a.y*b.height,width:a.width*b.width,height:a.height*b.height}:{x:a.x*b.width,y:a.y*b.height}};r.oa=p("C");r.w=function(){return this.h.w()};r.fa=function(a,b){return Ha(this.h.fa(a,b))};r.pa=p("ka");r.getItem=function(){return{src:Bf(this.ba),element:this.ba}};
function Bf(a){var b=a.getAttribute("data-original");return b?b:a.src}r.ga=function(){U(this.la,n)};r.O=function(){this.Db=n;this.hb&&(this.hb.destroy(),delete this.hb)};r.Qd=function(a){(this.C=Fa(this.ka,function(b){return b.getName()==a}))||console.log('WARNING: selector "'+a+'" not available')};r.ia=function(a){B(this.ka,function(b){b.ia(a)});sf(this.h)};r.Ja=function(){U(this.la,k)};r.aa=function(){this.Db=k;this.hb||(this.hb=new gf(this,this.element))};
r.stopSelection=function(a){lf&&U(this.c,n);this.C.stopSelection();a&&this.h.K(a)};r.ac=function(a){var b=ad(this.ba);return a.width?{x:a.x/b.width,y:a.y/b.height,width:a.width/b.width,height:a.height/b.height}:{x:a.x/b.width,y:a.y/b.height}};Af.prototype.addSelector=Af.prototype.kd;Af.prototype.fireEvent=Af.prototype.fireEvent;Af.prototype.setCurrentSelector=Af.prototype.Qd;Af.prototype.toItemCoordinates=Af.prototype.ac;function Cf(){Md(this,function(){return K("img.annotatable",document)})}v(Cf,Ld);Cf.prototype.Kb=function(a){return Bf(a)};Cf.prototype.Dc=function(a){return new Af(a)};Cf.prototype.$b=function(a){return Db(a)?"IMG"==a.tagName:n};function Df(a){return'<div class="annotorious-opacity-fade" style="white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;"><div class="annotorious-ol-hint" style="width: 400px; margin:0px auto;">'+$e(a.Rb)+"</div></div>"};function Ef(a,b){this.Y=a;this.d=b;this.T=cd(b.element);this.k=b.popup;Q(this.k.element,"z-index",99E3);this.v=[];this.D=[];this.zb=new OpenLayers.Layer.Boxes("Annotorious");this.Y.addLayer(this.zb);var c=this;this.Y.events.register("move",this.Y,function(){c.m&&c.ib()});b.addHandler("beforePopupHide",function(){c.za==c.m?c.k.clearHideTimer():c.Ba(c.za,c.m)})}r=Ef.prototype;r.destroy=function(){this.zb.destroy()};
r.ib=function(){var a=this.m.Qb.div,b=cd(a),c=Xc(a,this.Y.div),a=c.y,c=c.x,d=b.width,e=b.height,b=cd(this.k.element),a={y:a+e+5};c+b.width>this.T.width?(pb(this.k.element,"top-left","top-right"),a.x=c+d-b.width):(pb(this.k.element,"top-right","top-left"),a.x=c);0>a.x&&(a.x=0);a.x+b.width>this.T.width&&(a.x=this.T.width-b.width);a.y+b.height>this.T.height&&(a.y=this.T.height-b.height);this.k.setPosition(a)};
r.nc=function(a){console.log(" openlayers====================================");console.log(a);console.log("====================================");this.k.setAnnotation(a);this.ib();this.k.show()};r.Ba=function(a,b){a?(Xc(a.Qb.div,this.Y.div),Aa("height"),Q(a.vb,"border-color","#fff000"),this.m=a,this.nc(a.o)):delete this.m;b&&Q(b.vb,"border-color","#fff")};
r.K=function(a){var b=a.shapes[0].geometry,b=new OpenLayers.Marker.Box(new OpenLayers.Bounds(b.x,b.y,b.x+b.width,b.y+b.height));lb(b.div,"annotorious-ol-boxmarker-outer");Q(b.div,"border",m);var c=zb("div","annotorious-ol-boxmarker-inner");$c(c,"100%","100%");b.div.appendChild(c);var d={o:a,Qb:b,vb:c},e=this;M(c,"mouseover",function(){e.m||e.Ba(d);e.za=d});M(c,"mouseout",function(){delete e.za;e.k.startHideTimer()});this.v.push(d);c=a.shapes[0];"pixel"!=c.units&&(c=Jd(c,function(a){return e.d.na(a)}));
this.D[W(a.shapes[0])]=c;Ka(this.v,function(a,b){return Gd(b.o.shapes[0])-Gd(a.o.shapes[0])});var f=1E4;B(this.v,function(a){Q(a.Qb.div,"z-index",f);f++});this.zb.addMarker(b)};r.F=function(a){var b=Fa(this.v,function(b){return b.o==a});b&&(C(this.v,b),this.zb.removeMarker(b.Qb))};r.w=function(){return Da(this.v,function(a){return a.o})};r.z=function(a){a||this.k.startHideTimer()};r.Lc=function(a,b){var c=this.fa(a,b);if(0<c.length)return c[0]};
r.fa=function(a,b){var c=[],d=this;B(this.v,function(e){e=e.o;Fd(d.D[W(e.shapes[0])],a,b)&&c.push(e)});Ka(c,function(a,b){var c=d.D[W(a.shapes[0])],j=d.D[W(b.shapes[0])];return Gd(c)-Gd(j)});return c};function Ff(a){function b(){var a=parseInt(R(d.element,"width"),10),b=parseInt(R(d.element,"height"),10);$c(d.c,a,b);d.c.width=a;d.c.height=b}this.Y=a;this.element=a.div;var c=this.element.style[Aa("position")]||"";"absolute"!=c&&"relative"!=c&&Q(this.element,"position","relative");this.B=new vd;this.V=Td(Df,{Rb:"Click and Drag"});Q(this.V,"z-index",9998);S(this.V,0);this.element.appendChild(this.V);this.popup=new kf(this);this.h=new Ef(a,this);this.c=Td(zf,{width:"0",height:"0"});U(this.c,n);Q(this.c,
"position","absolute");Q(this.c,"top","0px");Q(this.c,"z-index",9999);this.element.appendChild(this.c);var d=this;b();this.C=new yf;this.C.init(this,this.c);this.lb=i;this.editor=new ff(this);Q(this.editor.element,"z-index",1E4);window.addEventListener?window.addEventListener("resize",b,n):window.attachEvent&&window.attachEvent("onresize",b);M(this.element,"mouseover",function(a){a=a.relatedTarget;(!a||!Eb(d.element,a))&&d.B.fireEvent("onMouseOverItem")});M(this.element,"mouseout",function(a){a=a.relatedTarget;
(!a||!Eb(d.element,a))&&d.B.fireEvent("onMouseOutOfItem")});M(this.c,"mousedown",function(a){var b=Yc(d.element);d.C.startSelection(a.clientX-b.x,a.clientY-b.y)});this.B.addHandler("onSelectionCompleted",function(a){Q(d.c,"pointer-events","none");a=a.viewportBounds;d.editor.setPosition(new zd(a.left,a.bottom+4));d.editor.open()});this.B.addHandler("onSelectionCanceled",function(){d.stopSelection()})}v(Ff,mf);r=Ff.prototype;r.aa=ba();r.O=ba();
r.ca=function(a){Q(this.c,"pointer-events","auto");var b=this;U(this.c,k);S(this.V,0.8);window.setTimeout(function(){S(b.V,0)},2E3);a&&(this.lb=a)};r.destroy=function(){this.h.destroy();Cb(this.V);Cb(this.c)};r.kd=ba();r.tc=function(a){this.h.F(a);var b=this.C,c=this;if(b){U(this.c,k);this.h.z(i);var d=this.c.getContext("2d"),e=Jd(a.shapes[0],function(a){return c.na(a)});console.log(e);b.drawShape(d,e);b=Hd(e).geometry;this.editor.setPosition(new zd(b.x,b.y+b.height));this.editor.open(a)}};
r.na=function(a){var b=this.Y.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x,a.y));return(a=a.width?this.Y.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x+a.width,a.y+a.height)):n)?{x:b.x,y:a.y,width:a.x-b.x+2,height:b.y-a.y+2}:{x:b.x,y:b.y}};r.w=function(){return this.h.w()};r.fa=function(a,b){return Ha(this.h.fa(a,b))};r.pa=ba();r.getItem=function(){return{src:"map://openlayers/something"}};r.xb=ba();
r.ac=function(a){var b=this.Y.getLonLatFromPixel(new OpenLayers.Pixel(a.x,a.y));return(a=a.width?new OpenLayers.Pixel(a.x+a.width-2,a.y+a.height-2):n)?(a=this.Y.getLonLatFromPixel(a),b={x:b.lon,y:a.lat,width:a.lon-b.lon,height:b.lat-a.lat},console.log(b),b):{x:b.lon,y:b.lat}};function Gf(){Md(this)}v(Gf,Ld);Gf.prototype.Kb=ca("map://openlayers/something");Gf.prototype.Dc=function(a){return new Ff(a)};Gf.prototype.$b=function(a){return a instanceof OpenLayers.Map};function Hf(a,b){this.U=a;this.d=b;this.T=cd(a.element);this.k=b.popup;Q(this.k.element,"z-index",99E3);this.v=[];var c=this;this.U.addHandler("animation",function(){c.m&&c.ib()});b.addHandler("onPopupShown",function(){c.m!==i&&c.m!=n&&c.d.fireEvent("onMouseOverAnnotation",c.m.o)});b.addHandler("beforePopupHide",function(){c.za==c.m?c.k.clearHideTimer():(c.d.fireEvent("onMouseOutOfAnnotation",c.m.o),c.Ba(c.za,c.m))})}r=Hf.prototype;
r.ib=function(){var a=this.U.element,b=this.m.Wb,c=cd(b),b=Xc(b,a),a=b.y,b=b.x,d=c.width,e=c.height,c=cd(this.k.element),a={x:b,y:a+e+12};pb(this.k.element,"top-right","top-left");this.U.isFullPage()||(b+c.width>this.T.width&&(pb(this.k.element,"top-left","top-right"),a.x=b+d-c.width),0>a.x&&(a.x=0),a.x+c.width>this.T.width&&(a.x=this.T.width-c.width),a.y+c.height>this.T.height&&(a.y=this.T.height-c.height));this.k.setPosition(a)};
r.nc=function(a){console.log("openseadragon====================================");console.log(a);console.log("====================================");this.k.setAnnotation(a);this.ib();this.k.show()};r.Ba=function(a,b){a?(Q(a.vb,"border-color","#fff000"),this.m=a,this.nc(a.o)):delete this.m;b&&Q(b.vb,"border-color","#fff")};
r.K=function(a){var b=a.shapes[0].geometry,c=zb("div","annotorious-ol-boxmarker-outer"),d=zb("div","annotorious-ol-boxmarker-inner");$c(d,"100%","100%");c.appendChild(d);var b=new OpenSeadragon.Rect(b.x,b.y,b.width,b.height),e={o:a,Wb:c,vb:d},f=this;M(d,"mouseover",function(){f.m||f.Ba(e);f.za=e});M(d,"mouseout",function(){delete f.za;f.k.startHideTimer()});this.v.push(e);Ka(this.v,function(a,b){return Gd(b.o.shapes[0])-Gd(a.o.shapes[0])});var h=1;B(this.v,function(a){Q(a.Wb,"z-index",h);h++});this.U.addOverlay(c,
b)};r.F=function(a){var b=Fa(this.v,function(b){return b.o==a});b&&(C(this.v,b),this.U.removeOverlay(b.Wb))};r.w=function(){return Da(this.v,function(a){console.log(a);return a.o})};r.z=function(a){var b=this;a?B(this.v,function(c){c.o==a&&(b.m&&b.m!=c?b.Ba(c,b.m):b.Ba(c))}):this.k.startHideTimer()};r.destroy=function(){var a=this;B(this.v,function(b){a.U.removeOverlay(b.Wb)});this.v=[]};function If(a){this.element=a.element;var b=document;b.querySelectorAll&&b.querySelector?b=b.querySelector(".openseadragon-container"):(b=document,b=(b.querySelectorAll&&b.querySelector?b.querySelectorAll(".openseadragon-container"):b.getElementsByClassName?b.getElementsByClassName("openseadragon-container"):wb())[0]);Q(b||m,"z-index",0);this.U=a;this.B=new vd;this.ka=[];this.Db=k;this.V=Td(Df,{Rb:"Click and Drag"});S(this.V,0);this.element.appendChild(this.V);this.popup=new kf(this);this.h=new Hf(a,
this);this.c=Td(zf,{width:"0",height:"0"});U(this.c,n);this.element.appendChild(this.c);var c=this,a=parseInt(R(c.element,"width"),10),b=parseInt(R(c.element,"height"),10);$c(c.c,a,b);c.c.width=a;c.c.height=b;a=new yf;a.init(this,this.c);this.ka.push(a);this.C=a;this.editor=new ff(this);nf(this,this.c);this.B.addHandler("onSelectionCompleted",function(a){a=a.viewportBounds;c.editor.setPosition(new zd(a.left,a.bottom+4));c.editor.open()});this.B.addHandler("onSelectionCanceled",function(){c.stopSelection()})}
v(If,mf);r=If.prototype;r.aa=ba();r.O=ba();r.destroy=function(){this.h.destroy();delete this.h};r.ca=function(a){Q(this.c,"pointer-events","auto");var b=this;U(this.c,k);S(this.V,0.8);window.setTimeout(function(){S(b.V,0)},2E3);a&&(this.lb=a)};r.tc=function(a){this.h.F(a);var b=this.C,c=this;if(b){U(this.c,k);this.h.z(i);var d=this.c.getContext("2d"),e=Jd(a.shapes[0],function(a){return c.na(a)});b.drawShape(d,e);b=Hd(e).geometry;this.editor.setPosition(new zd(b.x,b.y+b.height+4));this.editor.open(a)}};
r.na=function(a){var b=td(this.element);b.top+=window.pageYOffset;b.left+=window.pageXOffset;var c=new OpenSeadragon.Point(a.x,a.y),a=a.width?new OpenSeadragon.Point(a.x+a.width,a.y+a.height):n,c=this.U.viewport.viewportToWindowCoordinates(c);return a?(a=this.U.viewport.viewportToWindowCoordinates(a),{x:c.x-b.left,y:c.y-b.top,width:a.x-c.x+2,height:a.y-c.y+2}):c};r.w=function(){return this.h.w()};r.pa=ba();r.getItem=function(){return{src:"dzi://openseadragon/something"}};r.xb=ba();r.oa=p("C");
r.ac=function(a){var b=td(this.element);b.top+=window.pageYOffset;b.left+=window.pageXOffset;var c=new OpenSeadragon.Point(a.x+b.left,a.y+b.top),a=a.width?new OpenSeadragon.Point(a.x+b.left+a.width-2,a.y+b.top+a.height-2):n,c=this.U.viewport.windowToViewportCoordinates(c);return a?(a=this.U.viewport.windowToViewportCoordinates(a),{x:c.x,y:c.y,width:a.x-c.x,height:a.y-c.y}):c};function Jf(){Md(this)}v(Jf,Ld);Jf.prototype.Kb=ca("dzi://openseadragon/something");Jf.prototype.Dc=function(a){return new If(a)};Jf.prototype.$b=function(a){return a instanceof OpenSeadragon.xe};function Y(){function a(){Kf(b)}this.ad=n;this.jd=[];this.n=[new Cf];window.OpenLayers&&this.n.push(new Gf);window.OpenSeadragon&&this.n.push(new Jf);this.jb=[];var b=this;window.addEventListener?window.addEventListener("load",a,n):window.attachEvent&&window.attachEvent("onload",a)}function Kf(a){a.ad||(B(a.n,function(a){a.init()}),B(a.jb,function(b){b.initPlugin&&b.initPlugin(a);B(a.n,function(a){a.Eb(b)})}),a.ad=k)}function Z(a,b){return Fa(a.n,function(a){return Sd(a,b)})}r=Y.prototype;
r.ca=function(a,b){var c=i,d=i;t(a)?(c=a,d=b):u(a)&&(d=a);if(c){var e=Z(this,c);e&&e.ca(c,d)}else B(this.n,function(a){a.ca(d)})};r.K=function(a,b){console.log("ADDANNOT====================================");console.log(ud(a.src));console.log(a);console.log(b);console.log(this.w());var c=Z(this,a.src);console.log(c);c&&c.K(a,b);console.log("====================================")};r.addHandler=function(a,b){B(this.n,function(c){c.addHandler(a,b)})};r.$=function(a,b){B(this.n,function(c){c.$(a,b)})};
r.Eb=function(a,b){try{var c=new window.annotorious.plugin[a](b);"complete"==document.readyState?(c.initPlugin&&c.initPlugin(this),B(this.n,function(a){a.Eb(c)})):this.jb.push(c)}catch(d){console.log("Could not load plugin: "+a)}};r.destroy=function(a){if(a){var b=Z(this,a);b&&b.destroy(a)}else B(this.n,function(a){a.destroy()})};r.oa=function(a){var b=Z(this,a);if(b)return b.oa(a)};r.w=function(a){if(a){var b=Z(this,a);return b?b.w(a):[]}var c=[];B(this.n,function(a){Ia(c,a.w())});return c};
r.pa=function(a){var b=Z(this,a);return b?b.pa(a):[]};r.xd=p("jd");r.ga=function(a){if(a){var b=Z(this,a);b&&b.ga(a)}else B(this.n,function(a){a.ga()})};r.O=function(a){if(a){var b=Z(this,a);b&&b.O(a)}else B(this.n,function(a){a.O()})};r.stopSelection=function(a){if(a){var b=Z(this,a);b&&b.stopSelection(a)}else B(this.n,function(a){a.stopSelection()})};r.z=function(a){if(a){var b=Z(this,a.src);b&&b.z(a)}else B(this.n,function(a){a.z()})};
r.Bc=function(a,b,c){Kf(this);var d=Fa(this.n,function(b){return b.$b(a)});if(this.jd=b)d.Yd=b;d?d.Bc(a,b,c):g("Error: Annotorious does not support this media type in the current version or build configuration.")};r.Xb=function(a){var b=this;B(this.w(a),function(a){b.F(a)})};r.F=function(a){var b=Z(this,a.src);b&&b.F(a)};r.reset=function(){B(this.n,function(a){a.destroy();a.init()})};r.xb=function(a,b){var c=Z(this,a);c&&c.xb(a,b)};r.ia=function(a){B(this.n,function(b){b.ia(a)})};
r.te=function(a){a?this.aa(i):this.O(i)};r.Ja=function(a){if(a){var b=Z(this,a);b&&b.Ja(a)}else B(this.n,function(a){a.Ja()})};r.aa=function(a){if(a){var b=Z(this,a);b&&b.aa(a)}else B(this.n,function(a){a.aa()})};window.anno=new Y;Y.prototype.activateSelector=Y.prototype.ca;Y.prototype.addAnnotation=Y.prototype.K;Y.prototype.addHandler=Y.prototype.addHandler;Y.prototype.addPlugin=Y.prototype.Eb;Y.prototype.destroy=Y.prototype.destroy;Y.prototype.getActiveSelector=Y.prototype.oa;Y.prototype.getAnnotations=Y.prototype.w;Y.prototype.getAvailableSelectors=Y.prototype.pa;Y.prototype.hideAnnotations=Y.prototype.ga;Y.prototype.hideSelectionWidget=Y.prototype.O;Y.prototype.highlightAnnotation=Y.prototype.z;
Y.prototype.makeAnnotatable=Y.prototype.Bc;Y.prototype.removeAll=Y.prototype.Xb;Y.prototype.removeAnnotation=Y.prototype.F;Y.prototype.reset=Y.prototype.reset;Y.prototype.setActiveSelector=Y.prototype.xb;Y.prototype.setProperties=Y.prototype.ia;Y.prototype.showAnnotations=Y.prototype.Ja;Y.prototype.showSelectionWidget=Y.prototype.aa;window.annotorious||(window.annotorious={});window.annotorious.plugin||(window.annotorious.plugin={});
window.annotorious.geometry||(window.annotorious.geometry={},window.annotorious.geometry.expand=Id,window.annotorious.geometry.getBoundingRect=Hd);Y.prototype.setSelectionEnabled=Y.prototype.te;